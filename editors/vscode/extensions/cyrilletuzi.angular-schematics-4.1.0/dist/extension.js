module.exports=function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=15)}([function(e,t){e.exports=require("vscode")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(16);Object.defineProperty(t,"FileSystem",{enumerable:!0,get:function(){return i.FileSystem}});var n=o(8);Object.defineProperty(t,"Output",{enumerable:!0,get:function(){return n.Output}});var s=o(19);Object.defineProperty(t,"Terminal",{enumerable:!0,get:function(){return s.Terminals}});var r=o(20);Object.defineProperty(t,"JsonValidator",{enumerable:!0,get:function(){return r.JsonValidator}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extensionName=t.angularConfigFileNames=t.angularCollectionName=t.defaultComponentTypes=t.defaultCollectionsNames=void 0,t.defaultCollectionsNames=["@angular/material","@angular/cdk","@ionic/angular-toolkit","@ngrx/schematics","@ngxs/schematics","@nativescript/schematics","@ngx-formly/schematics","primeng-schematics","@ngx-kit/collection","ngx-spec","./schematics/collection.json"],t.defaultComponentTypes=[{label:"Dialog",options:[["type","dialog"],["skipSelector","true"]],package:"@angular/material",detail:"Angular Material dialog"},{label:"Snackbar",options:[["type","snackbar"],["skipSelector","true"]],package:"@angular/material",detail:"Angular Material snackbar"},{label:"Bottomsheet",options:[["type","bottomsheet"],["skipSelector","true"]],package:"@angular/material",detail:"Angular Material bottomsheet"},{label:"Modal",options:[["type","modal"],["skipSelector","true"]],package:"@ionic/angular",detail:"Ionic modal"},{label:"Popover",options:[["type","popover"],["skipSelector","true"]],package:"@ionic/angular",detail:"Ionic popover"},{label:"Dynamic Dialog",options:[["type","dialog"],["skipSelector","true"]],package:"primeng",detail:"PrimeNG dynamic dialog"}],t.angularCollectionName="@schematics/angular",t.angularConfigFileNames=["angular.json",".angular.json","angular-cli.json",".angular-cli.json"],t.extensionName="Angular Schematics"},function(e,t){e.exports=require("path")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(22);Object.defineProperty(t,"UserJourney",{enumerable:!0,get:function(){return i.UserJourney}});var n=o(7);Object.defineProperty(t,"formatCliCommandOptions",{enumerable:!0,get:function(){return n.formatCliCommandOptions}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(21);Object.defineProperty(t,"Workspace",{enumerable:!0,get:function(){return i.Workspace}});var n=o(9);Object.defineProperty(t,"WorkspaceFolderConfig",{enumerable:!0,get:function(){return n.WorkspaceFolderConfig}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(23);Object.defineProperty(t,"SHORTCUTS_CONFIRMATION_LABEL",{enumerable:!0,get:function(){return i.SHORTCUTS_CONFIRMATION_LABEL}}),Object.defineProperty(t,"shortcutsConfirmationChoices",{enumerable:!0,get:function(){return i.shortcutsConfirmationChoices}});var n=o(24);Object.defineProperty(t,"COMPONENT_TYPE",{enumerable:!0,get:function(){return n.COMPONENT_TYPE}}),Object.defineProperty(t,"ComponentShortcut",{enumerable:!0,get:function(){return n.ComponentShortcut}});var s=o(25);Object.defineProperty(t,"MODULE_TYPE",{enumerable:!0,get:function(){return s.MODULE_TYPE}}),Object.defineProperty(t,"ModuleShortcut",{enumerable:!0,get:function(){return s.ModuleShortcut}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatCliCommandOptions=void 0,t.formatCliCommandOptions=function(e){return Array.from(e).map(([e,t])=>"true"===t?"--"+e:Array.isArray(t)?t.map(t=>`--${e} ${t}`).join(" "):`--${e} ${t}`).join(" ")}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Output=void 0;const i=o(0),n=o(2);t.Output=class{static get channel(){return this._channel||(this._channel=i.window.createOutputChannel(n.extensionName)),this._channel}static logInfo(e){this.channel.appendLine(`[Info - ${(new Date).toLocaleTimeString()}] ${e}`)}static logWarning(e){this.channel.appendLine(`[Warning - ${(new Date).toLocaleTimeString()}] ${e}`)}static logError(e){this.channel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`)}static showError(e){this.logError(e),i.window.showErrorMessage(e)}static dispose(){this.channel.dispose()}}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFolderConfig=void 0;const n=o(0),s=o(3),r=o(2),a=o(1),c=o(4),l=o(27),u=o(29),d=o(6);t.WorkspaceFolderConfig=class{constructor(e){this.fileWatchers=[],this.uri=e.uri,this.name=e.name,this.index=e.index}init(){var e,t,o;return i(this,void 0,void 0,(function*(){this.disposeWatchers(),a.Output.logInfo("Loading Angular configuration.");const i=yield this.findAngularConfigFsPath({uri:this.uri,name:this.name,index:this.index}),c=[],h=s.dirname(i);h!==this.uri.fsPath&&a.Output.logInfo(`Your Angular project is not at the root of your "${this.name}" workspace folder. Real path: ${h}`),this.uri=n.Uri.file(h);const f=new u.AngularConfig;c.push(...yield f.init({uri:this.uri,name:this.name,index:this.index},i)),this.angularConfig=f,a.Output.logInfo("Loading global TSLint configuration.");const p=new u.TslintConfig,m=yield p.init(this.uri.fsPath);this.tslintConfig=p,a.Output.logInfo("Loading schematics configuration.");const g=new l.Collections,v=yield g.init({uri:this.uri,name:this.name,index:this.index},this.getDefaultCollections());this.collections=g;const w=new d.ComponentShortcut;yield w.init({uri:this.uri,name:this.name,index:this.index}),this.componentShortcut=w;const y=null!==(o=null===(t=null===(e=this.collections.getCollection(r.angularCollectionName))||void 0===e?void 0:e.getSchematic("module"))||void 0===t?void 0:t.hasOption("route"))&&void 0!==o&&o;a.Output.logInfo("Lazy-loaded module type: "+(y?"enabled":"disabled"));const C=new d.ModuleShortcut;C.init(y),this.moduleShorcut=C,this.fileWatchers.push(...c,m,...v);for(const e of this.fileWatchers)e.onDidChange(()=>{a.Output.logInfo(`Reloading "${this.name}" workspace folder configuration.`),this.init()});this.preferencesWatcher=n.workspace.onDidChangeConfiguration(()=>{a.Output.logInfo(`Reloading "${this.name}" workspace folder configuration.`),this.init()})}))}getDefaultUserCollection(){return this.angularConfig.defaultUserCollection}getDefaultCollections(){var e,t;return null!==(t=null===(e=this.angularConfig)||void 0===e?void 0:e.defaultCollections)&&void 0!==t?t:[]}getAngularProject(e){return this.angularConfig.projects.get(e)}getAngularProjects(){return this.angularConfig.projects}getComponentTypes(e){var t,o,i,n,s;const a=null!==(o=null===(t=this.getAngularProject(e))||void 0===t?void 0:t.componentShortcut.types)&&void 0!==o?o:this.componentShortcut.types,l=null!==(s=null===(n=null===(i=this.collections.getCollection(r.angularCollectionName))||void 0===i?void 0:i.getSchematic("component"))||void 0===n?void 0:n.hasOption("type"))&&void 0!==s&&s;for(const[,t]of a)if(t.options.has("type")){const o=t.options.get("type");l&&this.hasComponentSuffix(e,o)||(t.options.delete("type"),t.choice.description=c.formatCliCommandOptions(t.options))}return a}getModuleTypes(){return this.moduleShorcut.types}getSchematicsOptionDefaultValue(e,t,o){var i;const n=null===(i=this.getAngularProject(e))||void 0===i?void 0:i.getSchematicsOptionDefaultValue(t,o);return null!=n?n:this.angularConfig.getSchematicsOptionDefaultValue(t,o)}isRootAngularProject(e){return this.angularConfig.rootProjectName===e}hasComponentSuffix(e,t){var o;const i=this.getAngularProject(e);return(null!==(o=null==i?void 0:i.getComponentSuffixes().length)&&void 0!==o?o:0)>0?i.hasComponentSuffix(t):this.tslintConfig.hasComponentSuffix(t)}disposeWatchers(){var e;for(const e of this.fileWatchers)e.dispose();this.fileWatchers=[],null===(e=this.preferencesWatcher)||void 0===e||e.dispose()}findAngularConfigFsPath(e){return i(this,void 0,void 0,(function*(){const t=new n.RelativePattern(e,`**/{${r.angularConfigFileNames.join(",")}}`),o=yield n.workspace.findFiles(t,"**/node_modules/**",1);if(o.length>0)return 1===o.length?a.Output.logInfo(`Angular config file for "${this.name}" workspace folder found at: ${o[0].fsPath}`):a.Output.logInfo(`More than one Angular config file found for "${this.name}" workspace folder, keeping the first one: ${o[0].fsPath}`),o[0].fsPath;throw new Error}))}}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Collection=void 0;const n=o(0),s=o(3),r=o(1),a=o(11),c=o(12);t.Collection=class{constructor(e){this.schematicsChoices=[],this.schematics=new Map,this.name=e}init(e,t){return i(this,void 0,void 0,(function*(){const o=this.validateConfig(yield r.FileSystem.parseJsonFile(t));return yield this.setSchematics(e,o,t),t.includes("node_modules")?void 0:n.workspace.createFileSystemWatcher(t)}))}getName(){return this.name}getSchematicsNames(){return Array.from(this.schematics.keys()).sort()}getSchematic(e){return this.schematics.get(e)}getFullSchematicName(e){return`${this.name}:${e}`}validateConfig(e){var t,o;const i=new Map(Object.entries(null!==(o=r.JsonValidator.object(null===(t=r.JsonValidator.object(e))||void 0===t?void 0:t.schematics))&&void 0!==o?o:{}).map(([e,t])=>{const o=r.JsonValidator.object(t);return[e,{schema:r.JsonValidator.string(null==o?void 0:o.schema),description:r.JsonValidator.string(null==o?void 0:o.description),hidden:r.JsonValidator.boolean(null==o?void 0:o.hidden),private:r.JsonValidator.boolean(null==o?void 0:o.private),extends:r.JsonValidator.string(null==o?void 0:o.extends)}]}).filter(([e,t])=>!(!t.schema&&!(null==t?void 0:t.extends))||(r.Output.logWarning(`"${this.name}:${e}" schematic does not have a "schema" string property, so it is dropped.`),!1)));if(0===i.size)throw new Error(`No schematic found for "${this.name}" collection, so it is dropped.`);return{schematics:i}}setSchematics(e,t,o){return i(this,void 0,void 0,(function*(){this.schematics.clear(),this.schematicsChoices=[];const i=Array.from(t.schematics);r.Output.logInfo(`${i.length} schematic(s) detected for "${this.name}" collection: ${i.map(([e])=>e).join(", ")}`);const n=i.filter(([e,t])=>!t.hidden&&!t.private).filter(([e])=>"ng-add"!==e);if(0===n.length)throw new Error(`No public generation schematic found for "${this.name}" collection, so it is dropped.`);r.Output.logInfo(`${n.length} filtered schematic(s) keeped for "${this.name}" collection: ${n.map(([e])=>e).join(", ")}`);for(const[t,i]of n){const n=this.getFullSchematicName(t);r.Output.logInfo(`Loading "${n}" schematic`);let l=void 0;if(i.extends){const[o]=i.extends.split(":"),n=yield c.findCollectionFsPath(e,o);n?l={name:t,collectionName:this.name,description:`Schematic herited from "${o}"`,collectionFsPath:n}:r.Output.logWarning(`"${this.name}" collection wants to inherit "${t}" schematic from "${i.extends}" collection, but the latest cannot be found.`)}else if(i.schema){const e=s.join(s.dirname(o),i.schema);l={name:t,collectionName:this.name,description:i.description,fsPath:e}}if(l){const e=new a.Schematic(l.name,l.collectionName);try{yield e.init({fsPath:l.fsPath,collectionFsPath:l.collectionFsPath}),this.schematics.set(t,e),this.setSchematicChoice(l)}catch(e){r.Output.logError(`"${n}" schematic loading failed.`)}}}this.schematicsChoices=this.schematicsChoices.sort((e,t)=>e.label.localeCompare(t.label))}))}setSchematicChoice(e){this.schematicsChoices.push({label:e.name,description:e.description})}}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Schematic=void 0;const n=o(3),s=o(1);t.Schematic=class{constructor(e,t){this.optionsChoices=[],this.options=new Map,this.requiredOptionsNames=[],this.name=e,this.collectionName=t}init({fsPath:e,collectionFsPath:t}){return i(this,void 0,void 0,(function*(){if(!e){if(!t)throw new Error(`"${this.collectionName}:${this.name}" schematic cannot be extended.`);try{e=yield this.getFsPathFromCollection(t)}catch(e){throw new Error(`"${this.collectionName}:${this.name}" can not be extended.`)}}const o=yield s.FileSystem.parseJsonFile(e);if(!o)throw new Error(`"${this.collectionName}:${this.name}" schematic cannot be loaded.`);const i=this.validateConfig(o);this.options=i.properties,s.Output.logInfo(`${this.options.size} options detected for "${this.name}" schematic: ${Array.from(this.options.keys()).join(", ")}`),this.requiredOptionsNames=this.initRequiredOptions(i),s.Output.logInfo(`${this.requiredOptionsNames.length} required option(s) detected for "${this.name}" schematic${this.requiredOptionsNames.length>0?": "+this.requiredOptionsNames.join(", "):""}`),this.optionsChoices=this.initOptionsChoices(i,this.requiredOptionsNames)}))}getName(){return this.name}getSomeOptions(e){return new Map(e.filter(e=>this.options.has(e)).map(e=>[e,this.options.get(e)]))}getRequiredOptions(){return new Map(this.requiredOptionsNames.map(e=>[e,this.options.get(e)]))}getOptionDefaultValue(e){var t;return null===(t=this.options.get(e))||void 0===t?void 0:t.default}hasOption(e){return this.options.has(e)}hasNameAsFirstArg(){var e,t;for(const[o,i]of this.options)if("name"===o&&"argv"===(null===(e=i.$default)||void 0===e?void 0:e.$source)&&0===(null===(t=i.$default)||void 0===t?void 0:t.index))return!0;return!1}getFsPathFromCollection(e){var t,o,r;return i(this,void 0,void 0,(function*(){const i=yield s.FileSystem.parseJsonFile(e),a=s.JsonValidator.string(null===(r=s.JsonValidator.object(null===(o=s.JsonValidator.object(null===(t=s.JsonValidator.object(i))||void 0===t?void 0:t.schematics))||void 0===o?void 0:o[this.name]))||void 0===r?void 0:r.schema);if(!a)throw new Error;return n.join(n.dirname(e),a)}))}validateConfig(e){var t;const o=s.JsonValidator.object(e);return{properties:new Map(Object.entries(null!==(t=s.JsonValidator.object(null==o?void 0:o.properties))&&void 0!==t?t:{}).map(([e,t])=>{const o=s.JsonValidator.object(t),i=s.JsonValidator.object(null==o?void 0:o.$default);i&&(i.$source=s.JsonValidator.string(i.$source),i.index=s.JsonValidator.number(i.index));let n=s.JsonValidator.object(null==o?void 0:o.items);const r=s.JsonValidator.string(null==o?void 0:o["x-prompt"]),a=s.JsonValidator.object(null==o?void 0:o["x-prompt"]);if(n)n.enum=this.validateConfigArrayChoices(s.JsonValidator.array(n.enum));else if(a){!0===s.JsonValidator.boolean(a.multiselect)&&(n={},n.enum=this.validateConfigArrayChoices(s.JsonValidator.array(a.items)))}return[e,{type:s.JsonValidator.string(null==o?void 0:o.type),description:s.JsonValidator.string(null==o?void 0:o.description),visible:s.JsonValidator.boolean(null==o?void 0:o.visible),default:null==o?void 0:o.default,$default:i,enum:this.validateConfigArrayChoices(s.JsonValidator.array(null==o?void 0:o.enum)),items:n,"x-deprecated":s.JsonValidator.string(null==o?void 0:o["x-deprecated"]),"x-prompt":null!=r?r:s.JsonValidator.string(null==a?void 0:a.message)}]})),required:s.JsonValidator.array(null==o?void 0:o.required,"string")}}validateConfigArrayChoices(e){if(void 0!==e)return e.map(e=>{var t,o;return null!==(o=null!==(t=s.JsonValidator.string(e))&&void 0!==t?t:s.JsonValidator.number(e))&&void 0!==o?o:s.JsonValidator.boolean(e)}).map(e=>(null!=e?e:"").toString()).filter(e=>e)}initRequiredOptions(e){var t;return(null!==(t=e.required)&&void 0!==t?t:[]).filter(t=>void 0===e.properties.get(t).$default)}initOptionsChoices(e,t){const o=[],i=Array.from(e.properties).filter(([e])=>"project"!==e).filter(([e,t])=>!1!==t.visible).filter(([e,t])=>void 0===t["x-deprecated"]).filter(([e,t])=>!(t.$default&&"argv"===t.$default.$source&&0===t.$default.index));for(const[e,n]of i){let i=!1,s="";void 0===n.$default&&(t.includes(e)?(i=!0,s="(required) "):void 0!==n["x-prompt"]&&(i=!0,s="(suggested) ")),o.push({label:e,description:`${s}${n.description}`,picked:i})}return[...o.filter(e=>e.picked).sort((e,t)=>e.label.localeCompare(t.label)),...o.filter(e=>!e.picked).sort((e,t)=>e.label.localeCompare(t.label))]}}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.findCollectionFsPath=void 0;const n=o(3),s=o(1);t.findCollectionFsPath=function(e,t,{silent:o=!1}={}){var r;return i(this,void 0,void 0,(function*(){if(t.startsWith(".")&&t.endsWith(".json")){const i=n.join(e.uri.fsPath,t);if(!(yield s.FileSystem.isReadable(i,{silent:o})))return;return i}{const i=yield s.FileSystem.findPackageFsPath(e,e.uri.fsPath,t,{silent:o});if(!i)return;const a=yield s.FileSystem.parseJsonFile(i),c=s.JsonValidator.string(null===(r=s.JsonValidator.object(a))||void 0===r?void 0:r.schematics);if(!c)return;const l=n.join(n.dirname(i),c);if(!(yield s.FileSystem.isReadable(l,{silent:o})))return;return l}}))}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AngularProject=void 0;const n=o(3),s=o(1),r=o(6),a=o(14);t.AngularProject=class{constructor(e,t){this.name=e,this.schematicsDefaults=t.schematics,this.type=t.projectType,this.rootPath=t.root,void 0!==t.sourceRoot?this.sourcePath=t.sourceRoot:(this.sourcePath=n.posix.join(this.rootPath,"src"),s.Output.logWarning(`Your Angular configuration file should contain a "sourceRoot" string property for your "${this.name}" project. Default to "${this.sourcePath}".`));const o="library"===t.projectType?"lib":"app";this.appOrLibPath=n.posix.join(this.sourcePath,o),s.Output.logInfo(`"${e}" Angular project is of type "${this.type}" and its path is: ${this.appOrLibPath}.`),this.sourcePath.startsWith(this.rootPath)||s.Output.logError(`"root" and "sourceRoot" of "${this.name}" project do not start by the same path in angular.json`)}init(e){return i(this,void 0,void 0,(function*(){s.Output.logInfo(`Loading "${this.name}" Angular project's TSLint configuration.`);const t=n.join(e.uri.fsPath,this.rootPath),o=new a.TslintConfig,i=yield o.init(t,{silent:!0});this.tslintConfig=o;const c=new r.ComponentShortcut;return yield c.init(e),this.componentShortcut=c,i}))}getRootPath(){return this.rootPath}getSourcePath(){return this.sourcePath}getAppOrLibPath(){return this.appOrLibPath}getComponentSuffixes(){return this.tslintConfig.componentSuffixes}getType(){return this.type}hasComponentSuffix(e){return this.tslintConfig.hasComponentSuffix(e)}getSchematicsOptionDefaultValue(e,t){var o,i;return null===(i=null===(o=this.schematicsDefaults)||void 0===o?void 0:o.get(e))||void 0===i?void 0:i[t]}}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TslintConfig=void 0;const n=o(0),s=o(3),r=o(1);t.TslintConfig=class{constructor(){this.componentSuffixes=[]}init(e,{silent:t=!1}={}){return i(this,void 0,void 0,(function*(){const o=s.join(e,"tslint.json"),i=yield r.FileSystem.parseJsonFile(o,{silent:t}),a=this.validateConfig(i);return this.initComponentSuffixes(a),r.Output.logInfo(`${this.componentSuffixes.length} custom component suffixe(s) detected in TSLint config${this.componentSuffixes.length>0?": "+this.componentSuffixes.join(", "):""}`),n.workspace.createFileSystemWatcher(o)}))}hasComponentSuffix(e){return this.componentSuffixes.includes(e.toLowerCase())}validateConfig(e){var t,o;const i=null!==(o=r.JsonValidator.object(null===(t=r.JsonValidator.object(e))||void 0===t?void 0:t.rules))&&void 0!==o?o:{},n=r.JsonValidator.array(null==i?void 0:i["component-class-suffix"]);return{rules:{"component-class-suffix":r.JsonValidator.array(null==n?void 0:n.slice(1),"string")}}}initComponentSuffixes(e){var t,o;this.componentSuffixes=Array.from(new Set(null!==(o=null===(t=null==e?void 0:e.rules)||void 0===t?void 0:t["component-class-suffix"])&&void 0!==o?o:[])).map(e=>e.toLowerCase())}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const i=o(0),n=o(2),s=o(1),r=o(5),a=o(4),c=o(31);let l;t.activate=function(e){s.Output.logInfo(n.extensionName+" extension has been activated."),i.commands.executeCommand("setContext","inAngularProject",!0),r.Workspace.init(),r.Workspace.whenStable().then(()=>{l=i.window.createTreeView("angular-schematics",{treeDataProvider:new c.SchematicsTreeDataProvider}),l.message="Hello! While this list is useful to see all the schematics available,\n        it is easier to launch a generation with a right-click on a folder in the Explorer,\n        as then the extension will infer the workspace folder, the path and the project."}).catch(),e.subscriptions.push(i.commands.registerCommand("ngschematics.generateComponent",e=>{s.Output.logInfo("Starting journey to generate a component."),(new a.UserJourney).start(e,n.angularCollectionName,"component")}),i.commands.registerCommand("ngschematics.generateService",e=>{s.Output.logInfo("Starting journey to generate a service."),(new a.UserJourney).start(e,n.angularCollectionName,"service")}),i.commands.registerCommand("ngschematics.generateModule",e=>{s.Output.logInfo("Starting journey to generate a module."),(new a.UserJourney).start(e,n.angularCollectionName,"module")}),i.commands.registerCommand("ngschematics.generate",(e,t)=>{s.Output.logInfo("Starting journey to generate a schematics."),(new a.UserJourney).start(e,null==t?void 0:t.collectionName,null==t?void 0:t.schematicName)}))},t.deactivate=function(){for(const[,e]of r.Workspace.folders)e.disposeWatchers();s.Terminal.disposeAll(),s.Output.dispose(),null==l||l.dispose()}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=void 0;const n=o(17),s=o(3),r=o(8),a=o(18);let c=(()=>{class e{static findPackageFsPath(e,t,o,{silent:n=!1}={}){var a;return i(this,void 0,void 0,(function*(){const i=s.join(t,this.defaultNodeModulesPath,o,"package.json");if(void 0===this.packagesCache.get(`${e.name}:${o}`))if(yield this.isReadable(i,{silent:!0}))this.packagesCache.set(`${e.name}:${o}`,i);else{const i=s.join(t,"..");if(t!==i)return yield this.findPackageFsPath(e,i,o,{silent:n});this.packagesCache.set(`${e.name}:${o}`,null),n||r.Output.logError(`"${o}" package not found in any "node_modules" folder.`)}return null!==(a=this.packagesCache.get(`${e.name}:${o}`))&&void 0!==a?a:void 0}))}static isReadable(e,{silent:t=!1}={}){return i(this,void 0,void 0,(function*(){if(this.readableFiles.has(e))return!0;try{yield n.promises.access(e,n.constants.F_OK|n.constants.R_OK)}catch(o){return t||this.logError(e,"ENOENT"===(null==o?void 0:o.code)?"found":"read"),!1}return this.readableFiles.add(e),!0}))}static parseJsonFile(e,{silent:t=!1}={}){return i(this,void 0,void 0,(function*(){if(yield this.isReadable(e,{silent:t})){let o;try{let t=yield n.promises.readFile(e,{encoding:"utf8"});o=a.parseJson(t,a.JsonParseMode.Json5)}catch(o){return void(t||this.logError(e,"parsed"))}return o}}))}static removeFilename(e){return s.posix.basename(e).includes(".")?s.posix.dirname(e):e}static logError(e,t){const o=`"${e}" can not be ${t}.`;r.Output.logError(o)}}return e.defaultNodeModulesPath="node_modules",e.packagesCache=new Map,e.readableFiles=new Set,e})();t.FileSystem=c},function(e,t){e.exports=require("fs")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseJson=t.JsonParseMode=void 0;class i extends Error{constructor(e=""){super(e)}}class n extends i{}class s extends n{constructor(e){const t=e.previous,o=JSON.stringify(c(e));super(`Invalid JSON character: ${o} at ${t.line}:${t.character}.`),this.invalidChar=o,this.line=t.line,this.offset=t.offset,this.character=t.character}}class r extends n{constructor(e){super("Unexpected end of file.")}}class a extends n{constructor(e,t){super(`An error happened at file path ${JSON.stringify(e)}: ${t.message}`),this.path=e,this.exception=t}}function c(e){return e.original[e.position.offset]}function l(e){e.previous=e.position;let{offset:t,line:o,character:i}=e.position;const n=e.original[t];t++,"\n"==n?(o++,i=0):i++,e.position={offset:t,line:o,character:i}}function u(e,t){const o=c(e);if(t){if(!o)throw new r(e);if(-1==t.indexOf(o))throw new s(e)}return l(e),o}function d(e,t,o,i){let n,s=!1;for(;;)if(n=u(e),"+"==n||"-"==n){if(s)break;s=!0,o+=n}else{if("0"!=n&&"1"!=n&&"2"!=n&&"3"!=n&&"4"!=n&&"5"!=n&&"6"!=n&&"7"!=n&&"8"!=n&&"9"!=n)break;s=!0,o+=n}return e.position=e.previous,{kind:"number",start:t,end:e.position,text:e.original.substring(t.offset,e.position.offset),value:Number.parseFloat(o),comments:i}}function h(e,t,o,i){let n="";for(let t=c(e);t&&"0123456789abcdefABCDEF".includes(t);t=c(e))n+=t,l(e);const s=Number.parseInt(n,16);return{kind:"number",start:o,end:e.position,text:e.original.substring(o.offset,e.position.offset),value:t?-s:s,comments:i}}function f(e,t=g(e)){let o="",i=!1;const n=e.position;for(;;){const r=u(e);if("-"==r){if(""!=o)throw new s(e)}else{if("I"==r&&("-"==o||""==o||"+"==o)&&0!=(e.mode&w.NumberConstantsAllowed)){u(e,"n"),u(e,"f"),u(e,"i"),u(e,"n"),u(e,"i"),u(e,"t"),u(e,"y"),o+="Infinity";break}if("0"==r){if("0"==o||"-0"==o)throw new s(e)}else if("1"==r||"2"==r||"3"==r||"4"==r||"5"==r||"6"==r||"7"==r||"8"==r||"9"==r){if("0"==o||"-0"==o)throw new s(e)}else if("+"==r&&""==o);else{if("."!=r){if("e"==r||"E"==r)return d(e,n,o+r,t);if("x"!=r||"0"!=o&&"-0"!=o||0==(e.mode&w.HexadecimalNumberAllowed)){e.position=e.previous;break}return h(e,"-0"==o,n,t)}if(i)throw new s(e);i=!0}}o+=r}if(o.endsWith(".")&&0==(e.mode&w.HexadecimalNumberAllowed))throw new s(e);return{kind:"number",start:n,end:e.position,text:e.original.substring(n.offset,e.position.offset),value:Number.parseFloat(o),comments:t}}function p(e,t=g(e)){const o=e.position,i=u(e);if(0==(e.mode&w.SingleQuotesAllowed)&&"'"==i)throw new s(e);let n="";for(;;){let a=u(e);if(a==i)return{kind:"string",start:o,end:e.position,text:e.original.substring(o.offset,e.position.offset),value:n,comments:t};if("\\"==a)switch(a=u(e),a){case"\\":case"/":case'"':case i:n+=a;break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":const[t]=u(e,"0123456789abcdefABCDEF"),[o]=u(e,"0123456789abcdefABCDEF"),[c]=u(e,"0123456789abcdefABCDEF"),[l]=u(e,"0123456789abcdefABCDEF");n+=String.fromCharCode(parseInt(t+o+c+l,16));break;case void 0:throw new r(e);case"\n":if(0==(e.mode&w.MultiLineStringAllowed))throw new s(e);n+=a;break;default:throw new s(e)}else{if(void 0===a)throw new r(e);if("\b"==a||"\f"==a||"\n"==a||"\r"==a||"\t"==a)throw new s(e);n+=a}}}function m(e,t=g(e)){const o=e.position;let i;if(0!=(e.mode&w.IdentifierKeyNamesAllowed)){const t=c(e);i='"'==t||"'"==t?p(e):function(e,t=g(e)){const o=e.position;let i=c(e);if(i&&-1!="0123456789".indexOf(i)){const t=f(e);return{kind:"identifier",start:o,end:t.end,text:t.text,value:t.value.toString()}}let n=!0,s="";for(;;){if(i=u(e),null==i||-1==(n?"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMOPQRSTUVWXYZ".indexOf(i):"_$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMOPQRSTUVWXYZ0123456789".indexOf(i)))return e.position=e.previous,{kind:"identifier",start:o,end:e.position,text:e.original.substr(o.offset,e.position.offset),value:s,comments:t};s+=i,n=!1}}(e)}else i=p(e);g(e),u(e,":");const n=v(e),s=e.position;return{kind:"keyvalue",key:i,value:n,start:o,end:s,text:e.original.substring(o.offset,s.offset),comments:t}}function g(e){if(0!=(e.mode&w.CommentsAllowed)){const t=[];for(;;){const o=e.original[e.position.offset];if("/"==o&&"*"==e.original[e.position.offset+1]){const o=e.position;for(l(e),l(e);"*"!=e.original[e.position.offset]||"/"!=e.original[e.position.offset+1];)if(l(e),e.position.offset>=e.original.length)throw new r(e);l(e),l(e),t.push({kind:"multicomment",start:o,end:e.position,text:e.original.substring(o.offset,e.position.offset),content:e.original.substring(o.offset+2,e.position.offset-2)})}else if("/"==o&&"/"==e.original[e.position.offset+1]){const o=e.position;for(l(e),l(e);"\n"!=e.original[e.position.offset]&&(l(e),!(e.position.offset>=e.original.length)););e.position.offset<e.original.length&&l(e),t.push({kind:"comment",start:o,end:e.position,text:e.original.substring(o.offset,e.position.offset),content:e.original.substring(o.offset+2,e.position.offset-1)})}else{if(" "!=o&&"\t"!=o&&"\n"!=o&&"\r"!=o&&"\f"!=o)break;l(e)}}return t}{let t=e.original[e.position.offset];for(;" "==t||"\t"==t||"\n"==t||"\r"==t||"\f"==t;)l(e),t=e.original[e.position.offset];return[]}}function v(e,t=g(e)){let o;switch(c(e)){case void 0:throw new r(e);case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":o=f(e,t);break;case".":case"+":if(0==(e.mode&w.LaxNumberParsingAllowed))throw new s(e);o=f(e,t);break;case"'":case'"':o=p(e,t);break;case"I":if(0==(e.mode&w.NumberConstantsAllowed))throw new s(e);o=f(e,t);break;case"N":if(0==(e.mode&w.NumberConstantsAllowed))throw new s(e);o=function(e,t=g(e)){const o=e.position;u(e,"N"),u(e,"a"),u(e,"N");const i=e.position;return{kind:"number",start:o,end:i,text:e.original.substring(o.offset,i.offset),value:NaN,comments:t}}(e,t);break;case"t":o=function(e,t=g(e)){const o=e.position;u(e,"t"),u(e,"r"),u(e,"u"),u(e,"e");const i=e.position;return{kind:"true",start:o,end:i,text:e.original.substring(o.offset,i.offset),value:!0,comments:t}}(e,t);break;case"f":o=function(e,t=g(e)){const o=e.position;u(e,"f"),u(e,"a"),u(e,"l"),u(e,"s"),u(e,"e");const i=e.position;return{kind:"false",start:o,end:i,text:e.original.substring(o.offset,i.offset),value:!1,comments:t}}(e,t);break;case"n":o=function(e,t=g(e)){const o=e.position;u(e,"n"),u(e,"u"),u(e,"l"),u(e,"l");const i=e.position;return{kind:"null",start:o,end:i,text:e.original.substring(o.offset,i.offset),value:null,comments:t}}(e,t);break;case"[":o=function(e,t=g(e)){const o=e.position;u(e,"[");const i=[],n=[];if(g(e),"]"!=c(e)){const t=v(e);n.push(t),i.push(t.value)}for(;"]"!=c(e);){u(e,",");const t=g(e);if(0!=(e.mode&w.TrailingCommasAllowed)&&"]"===c(e))break;const o=v(e,t);n.push(o),i.push(o.value)}return u(e,"]"),{kind:"array",start:o,end:e.position,text:e.original.substring(o.offset,e.position.offset),value:i,elements:n,comments:t}}(e,t);break;case"{":o=function(e,t=g(e)){const o=e.position;u(e,"{");const i={},n=[];if(g(e),"}"!=c(e)){const t=m(e);for(i[t.key.value]=t.value.value,n.push(t);"}"!=c(e);){u(e,",");const t=g(e);if(0!=(e.mode&w.TrailingCommasAllowed)&&"}"===c(e))break;const o=m(e,t);i[o.key.value]=o.value.value,n.push(o)}}return u(e,"}"),{kind:"object",properties:n,start:o,end:e.position,value:i,text:e.original.substring(o.offset,e.position.offset),comments:t}}(e,t);break;default:throw new s(e)}return g(e),o}var w;function y(e,t=w.Default){t==w.Default&&(t=w.Strict);const o={position:{offset:0,line:0,character:0},previous:{offset:0,line:0,character:0},original:e,comments:void 0,mode:t},i=v(o);if(o.position.offset<e.length){const t=e.substr(o.position.offset),i=t.length>20?t.substr(0,20)+"...":t;throw new Error(`Expected end of file, got "${i}" at ${o.position.line}:${o.position.character}.`)}return i}!function(e){e[e.Strict=0]="Strict",e[e.CommentsAllowed=1]="CommentsAllowed",e[e.SingleQuotesAllowed=2]="SingleQuotesAllowed",e[e.IdentifierKeyNamesAllowed=4]="IdentifierKeyNamesAllowed",e[e.TrailingCommasAllowed=8]="TrailingCommasAllowed",e[e.HexadecimalNumberAllowed=16]="HexadecimalNumberAllowed",e[e.MultiLineStringAllowed=32]="MultiLineStringAllowed",e[e.LaxNumberParsingAllowed=64]="LaxNumberParsingAllowed",e[e.NumberConstantsAllowed=128]="NumberConstantsAllowed",e[e.Default=0]="Default",e[e.Loose=255]="Loose",e[e.Json=0]="Json",e[e.Json5=255]="Json5"}(w=t.JsonParseMode||(t.JsonParseMode={})),t.parseJson=function(e,t=w.Default,o){try{if(t==w.Strict)try{return JSON.parse(e)}catch(o){return y(e,t).value}return y(e,t).value}catch(e){if(o&&o.path&&e instanceof n)throw new a(o.path,e);throw e}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Terminals=void 0;const i=o(0),n=o(2);let s=(()=>{class e{static send(e,t){const o=this.getTerminal(e);o.show(),o.sendText(t)}static disposeAll(){for(const e of this.terminals.values())e.dispose()}static getTerminal(e){const t=`${n.extensionName} - ${e.name}`;return this.terminals.has(e.name)&&this.isTerminalExisting(t)||this.terminals.set(e.name,i.window.createTerminal({name:t,cwd:e.uri.fsPath})),this.terminals.get(e.name)}static isTerminalExisting(e){return i.window.terminals.map(e=>e.name).includes(e)}}return e.terminals=new Map,e})();t.Terminals=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonValidator=void 0;t.JsonValidator=class{static boolean(e){if("boolean"==typeof e)return e}static number(e){if("number"==typeof e)return e}static string(e){if("string"==typeof e)return e}static array(e,t){if(Array.isArray(e)&&(!t||e.length===e.filter(e=>typeof e===t).length))return e}static object(e){if("object"==typeof e&&null!==e)return e}}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Workspace=void 0;const n=o(0),s=o(1),r=o(9);let a=(()=>{class e{static init(){var e;return i(this,void 0,void 0,(function*(){const t=Date.now(),o=null!==(e=n.workspace.workspaceFolders)&&void 0!==e?e:[];o.length>0?s.Output.logInfo(o.length+" workspace folder(s) detected."):s.Output.logError("No workspace folder detected.");for(const e of o)yield this.add(e);this.stable=!0;const i=Date.now()-t;s.Output.logInfo(`Configurations of all workspace folders are now ready. Duration: ${i}ms.`),this.watcher=n.workspace.onDidChangeWorkspaceFolders(e=>{var t;for(const t of e.added)s.Output.logInfo(`Loading configuration of new "${t.name}" workspace folder.`),this.add(t);for(const o of e.removed)s.Output.logInfo(`Unloading configuration of removed "${o.name}" workspace folder.`),null===(t=this.folders.get(o.name))||void 0===t||t.disposeWatchers(),this.folders.delete(o.name)})}))}static getFolderFromPath(e){const t=n.Uri.file(e);return n.workspace.getWorkspaceFolder(t)}static askFolder(e){var t,o,r;return i(this,void 0,void 0,(function*(){let i;if(e&&(s.Output.logInfo("Context path detected: resolving current workspace folder from it."),i=null===(t=n.workspace.getWorkspaceFolder(e))||void 0===t?void 0:t.name),!i)if(1===(null===(o=n.workspace.workspaceFolders)||void 0===o?void 0:o.length))s.Output.logInfo("There is only one workspace folder opened, default to it."),i=n.workspace.workspaceFolders[0].name;else{s.Output.logInfo("There are multiple Code workspaces opened, ask the user which one we should use.");const e=Array.from(this.folders).map(([e,t])=>({label:e,description:t.uri.fsPath}));if(e.length>0){const t=yield n.window.showQuickPick(e,{placeHolder:"In which of your Angular workspace folders do you want to generate?",ignoreFocusOut:!0});i=null==t?void 0:t.label}else i=null===(r=yield n.window.showWorkspaceFolderPick())||void 0===r?void 0:r.name}if(!i)return;const a=this.folders.get(i);if(!a)throw new Error;return a}))}static whenStable(){return i(this,void 0,void 0,(function*(){if(!this.stable){const e=new Promise(e=>{this.isStable(e)}),t=new Promise((e,t)=>{setTimeout(()=>{t()},1e4)});return Promise.race([e,t])}}))}static isStable(e){this.stable?e():setTimeout(()=>{this.isStable(e)},1e3)}static add(e){return i(this,void 0,void 0,(function*(){s.Output.logInfo(`Loading configuration of "${e.name}" workspace folder.`);try{const t=new r.WorkspaceFolderConfig(e);yield t.init(),this.folders.set(e.name,t)}catch(t){s.Output.logError(`"${e.name}" was dropped as it does not contain any Angular config file. Add a "angular.json" file in your project with \`{ "version": 1 }\``)}}))}}return e.folders=new Map,e.stable=!1,e})();t.Workspace=a},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserJourney=void 0;const n=o(0),s=o(2),r=o(1),a=o(5),c=o(6),l=o(26),u=o(7);let d=(()=>{class e{constructor(){this.projectName=""}start(t,o,c){return i(this,void 0,void 0,(function*(){try{yield n.window.withProgress({location:n.ProgressLocation.Window,title:s.extensionName+": loading configuration, please wait..."},()=>a.Workspace.whenStable())}catch(e){return void r.Output.showError(`Loading configurations needed for ${s.extensionName} extension was too long. Check Output channel for error logs.`)}let i;try{i=yield a.Workspace.askFolder(t)}catch(e){return void r.Output.showError('No valid Angular config file found for the chosen workspace. Add a "angular.json" file in your project with `{ "version": 1 }`')}if(!i)return void r.Output.logInfo("You have canceled the workspace folder choice.");if(this.workspaceFolder=i,r.Output.logInfo(`Workspace folder selected: "${i.name}"`),this.cliCommand=new l.CliCommand(i,null==t?void 0:t.path),!this.cliCommand.getProjectName()&&this.workspaceFolder.getAngularProjects().size>0){const e=yield this.askProjectName();if(!e)return void r.Output.logInfo("You have canceled the Angular project choice.");this.cliCommand.setProjectName(e)}if(this.projectName=this.cliCommand.getProjectName(),this.projectName&&r.Output.logInfo(`Angular project used: "${this.cliCommand.getProjectName()}"`),!o){try{o=yield this.askCollectionName()}catch(e){return void this.showCollectionMissingErrorWithFix(s.angularCollectionName)}if(!o)return void r.Output.logInfo("You have canceled the collection choice.")}r.Output.logInfo(`Collection used: "${o}"`),this.cliCommand.setCollectionName(o);const u=this.workspaceFolder.collections.getCollection(o);if(!u)return void this.showCollectionMissingErrorWithFix(o);if(this.collection=u,!c&&!(c=yield this.askSchematicName()))return void r.Output.logInfo("You have canceled the schematic choice.");r.Output.logInfo(`Schematic used: "${o}:${c}"`);const d=this.collection.getSchematic(c);if(!d)return void r.Output.showError(`Cannot load "${o}:${c}" schematic. See Output channel for error logs.`);if(this.schematic=d,this.cliCommand.setSchematic(d),!(yield this.cliCommand.validateProject())){const e=yield this.askSourcePath();if(!e)return void r.Output.logInfo("You have canceled the source path choice.");this.cliCommand.addOptions([["path",e]])}let h;if(this.schematic.hasNameAsFirstArg()){if(r.Output.logInfo("This schematic has a default argument to set the path and name."),h=yield this.askNameAsFirstArg(),!h)return void r.Output.logInfo("You have canceled the default argument input.");this.cliCommand.setNameAsFirstArg(h)}let f=!1;if(o===s.angularCollectionName&&e.shortcutSchematics.includes(c)){let e;if("component"===c){if(e=yield this.askComponentOptions(),!e)return void r.Output.logInfo("You have canceled the component type choice.")}else if("module"===c){if(e=yield this.askModuleOptions(),!e)return void r.Output.logInfo("You have canceled the module type choice.");if(!e.has("module")){const e=yield this.askWhereToImportModule();e&&this.cliCommand.addOptions([["module",e]])}}if(e&&this.cliCommand.addOptions(e),f=yield this.askShortcutConfirmation(),void 0===f)return void r.Output.logInfo("You have canceled the generation.")}if(!f){const e=yield this.askOptions();if(this.cliCommand.addOptions(e),!(yield this.askConfirmation()))return void r.Output.logInfo("You have canceled the generation.")}this.cliCommand.launchCommand();try{yield n.window.withProgress({location:n.ProgressLocation.Notification,title:s.extensionName+": launching the generation, please wait..."},()=>this.jumpToFile(this.cliCommand.guessGereratedFileFsPath()))}catch(e){this.showUnknownStatus()}}))}askProjectName(){return i(this,void 0,void 0,(function*(){if(1===this.workspaceFolder.getAngularProjects().size)return Array.from(this.workspaceFolder.getAngularProjects().keys())[0];{const e=Array.from(this.workspaceFolder.getAngularProjects()).map(([e,t])=>{const o=`${this.workspaceFolder.isRootAngularProject(e)?"root ":""}${t.getType()} in ${t.getAppOrLibPath()}`;return{label:e,description:`${o[0].toUpperCase()}${o.substr(1)}`}}),t=yield n.window.showQuickPick(e,{placeHolder:"In which your Angular projects do you want to generate?",ignoreFocusOut:!0});return null==t?void 0:t.label}}))}askCollectionName(){return i(this,void 0,void 0,(function*(){if(0===this.workspaceFolder.collections.getCollectionsNames().length)throw new Error;if(1===this.workspaceFolder.collections.getCollectionsNames().length){const e=this.workspaceFolder.collections.getCollectionsNames()[0];return r.Output.logInfo(`Only collection detected: "${e}". Default to it.`),e}return r.Output.logInfo("Multiple collections detected: ask the user which one to use."),n.window.showQuickPick(this.workspaceFolder.collections.getCollectionsNames(),{placeHolder:"What schematics collection do you want to use?",ignoreFocusOut:!0})}))}askSchematicName(){return i(this,void 0,void 0,(function*(){const e=yield n.window.showQuickPick(this.collection.schematicsChoices,{placeHolder:"What schematics do you want to generate?",ignoreFocusOut:!0});return e?e.label:void 0}))}askSourcePath(){return i(this,void 0,void 0,(function*(){return n.window.showInputBox({prompt:'What is the source path? (Pro-tip: the extension can detect it with a correct "angular.json" or if there is an "app.module.ts" file)',placeHolder:"src/app",ignoreFocusOut:!0})}))}askNameAsFirstArg(){return i(this,void 0,void 0,(function*(){const e=this.cliCommand.getProjectName(),t=this.cliCommand.getContextForNameAsFirstArg();r.Output.logInfo(`Context path detected for default argument: "${t}"`);let o=`Choose the name${this.schematic.hasOption("path")?" or path/to/name":""}.`;this.schematic.hasOption("path")&&this.workspaceFolder.isRootAngularProject(e)&&!t&&(o+=" Pro-tip: the path can be inferred if you right-click on the directory where you want to generate.");const i=yield n.window.showInputBox({prompt:o,value:t,valueSelection:[t.length,t.length],ignoreFocusOut:!0}),s="."+this.schematic.getName();return(null==i?void 0:i.endsWith(s))?i.replace(s,""):i}))}askComponentOptions(){var e;return i(this,void 0,void 0,(function*(){const t=this.workspaceFolder.getComponentTypes(this.projectName),o=Array.from(t.values()).map(e=>e.choice),i=yield n.window.showQuickPick(o,{placeHolder:"What type of component do you want?",ignoreFocusOut:!0});return i?null===(e=t.get(i.label))||void 0===e?void 0:e.options:void 0}))}askModuleOptions(){var e;return i(this,void 0,void 0,(function*(){const t=this.workspaceFolder.getModuleTypes(),o=t.get(c.MODULE_TYPE.LAZY);if(o){const e=this.cliCommand.getRouteFromFirstArg();o.options.set("route",e),o.choice.description=u.formatCliCommandOptions(o.options)}const i=Array.from(t.values()).map(e=>e.choice),s=yield n.window.showQuickPick(i,{placeHolder:"What type of module do you want?",ignoreFocusOut:!0});return s?null===(e=t.get(s.label))||void 0===e?void 0:e.options:void 0}))}askWhereToImportModule(){return i(this,void 0,void 0,(function*(){const e=new n.RelativePattern(this.cliCommand.getProjectSourcePath(),"**/*.module.ts"),t=(yield n.window.withProgress({location:n.ProgressLocation.Notification,title:s.extensionName+": looking for existing modules, please wait..."},()=>n.workspace.findFiles(e,void 0,50))).filter(e=>!e.fsPath.includes("-routing")).map(e=>e.fsPath.substring(this.cliCommand.getProjectSourcePath().length+1,e.fsPath.length-10));if(0===t.length)return;t.unshift("Nowhere");const o=yield n.window.showQuickPick(t,{placeHolder:"Where do you want to import the module?",ignoreFocusOut:!0});return"Nowhere"!==o?o:void 0}))}askShortcutConfirmation(){return i(this,void 0,void 0,(function*(){const e=yield n.window.showQuickPick(c.shortcutsConfirmationChoices,{placeHolder:this.cliCommand.getCommand(),ignoreFocusOut:!0});return(null==e?void 0:e.label)===c.SHORTCUTS_CONFIRMATION_LABEL.YES||(null==e?void 0:e.label)!==c.SHORTCUTS_CONFIRMATION_LABEL.MORE_OPTIONS&&void 0}))}askOptions(){return i(this,void 0,void 0,(function*(){const e=yield this.askOptionsNames();return e?yield this.askOptionsValues(e):new Map}))}askOptionsNames(){return i(this,void 0,void 0,(function*(){const e=this.schematic.optionsChoices;return 0===e.length?[]:((yield n.window.showQuickPick(e,{canPickMany:!0,placeHolder:"Do you need some options? (if not, just press Enter to skip this step)",ignoreFocusOut:!0}))||[]).map(e=>e.label)}))}askOptionsValues(e){var t,o,n;return i(this,void 0,void 0,(function*(){const i=[...this.schematic.getRequiredOptions(),...this.schematic.getSomeOptions(e)],s=new Map;for(let[e,r]of i){let i="";const a=null!==(o=null!==(t=null==r?void 0:r["x-prompt"])&&void 0!==t?t:r.description)&&void 0!==o?o:"What value do you want for this option?";if(void 0!==r.enum)i=yield this.askOptionEnum(e,r.enum,a);else if("boolean"===r.type){const t=!1===r.default?["false","true"]:["true","false"];i=yield this.askOptionEnum(e,t,a)}else i="array"===r.type&&(null===(n=r.items)||void 0===n?void 0:n.enum)?yield this.askOptionMultiselect(e,r.items.enum,a):yield this.askOptionText(e,a);i&&s.set(e,i)}return s}))}askOptionText(e,t){return i(this,void 0,void 0,(function*(){return n.window.showInputBox({prompt:`--${e}: ${t}`,ignoreFocusOut:!0})}))}askOptionEnum(e,t,o){return i(this,void 0,void 0,(function*(){return n.window.showQuickPick(t,{placeHolder:`--${e}: ${o}`,ignoreFocusOut:!0})}))}askOptionMultiselect(e,t,o){return i(this,void 0,void 0,(function*(){return n.window.showQuickPick(t,{placeHolder:`--${e}: ${o}`,canPickMany:!0,ignoreFocusOut:!0})}))}askConfirmation(){return i(this,void 0,void 0,(function*(){const e=[{label:"$(check) Confirm",description:"Pro-tip: take a minute to check the command above is really what you want"},{label:"$(close) Cancel"}],t=yield n.window.showQuickPick(e,{placeHolder:this.cliCommand.getCommand(),ignoreFocusOut:!0});return"$(check) Confirm"===(null==t?void 0:t.label)}))}jumpToFile(e,t=0){return i(this,void 0,void 0,(function*(){if(""===e)throw new Error;if(yield r.FileSystem.isReadable(e,{silent:!0})){const t=yield n.workspace.openTextDocument(e);return yield n.window.showTextDocument(t),void r.Output.logInfo("Command has succeeded! Check the Terminal for more details.")}if(!(t<10))throw new Error;t+=1,yield new Promise((o,i)=>{setTimeout(()=>{this.jumpToFile(e,t).then(()=>{o()}).catch(()=>{i()})},500)})}))}showUnknownStatus(){return i(this,void 0,void 0,(function*(){r.Output.logInfo("Command launched."),"Refresh Explorer"===(yield n.window.showInformationMessage("Command launched, check the Terminal to know its status. You may need to refresh the Explorer to see the generated file(s).","Refresh Explorer"))&&n.commands.executeCommand("workbench.files.action.refreshFilesExplorer")}))}showCollectionMissingErrorWithFix(e){return i(this,void 0,void 0,(function*(){const t=e===s.angularCollectionName?`"${e}" should be present in a correctly installed Angular project.`:`Cannot load "${e}" collection. It may not exist in "${this.workspaceFolder.name}" workspace folder.`;r.Output.logError(t);const o="Try to npm install the missing schematics";if((yield n.window.showErrorMessage(t,o))===o){r.Output.logInfo("Trying to npm install "+e),r.Terminal.send(this.workspaceFolder,`npm install ${e} --save-dev`);const t="Reload window";(yield n.window.showInformationMessage("Once the npm install is finished, the project must be reloaded.",t))===t&&n.commands.executeCommand("workbench.action.reloadWindow")}}))}}return e.shortcutSchematics=["component","service","module"],e})();t.UserJourney=d},function(e,t,o){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.shortcutsConfirmationChoices=t.SHORTCUTS_CONFIRMATION_LABEL=void 0,function(e){e.YES="$(check) Confirm",e.MORE_OPTIONS="$(gear) Add more options",e.NO="$(close) Cancel"}(i=t.SHORTCUTS_CONFIRMATION_LABEL||(t.SHORTCUTS_CONFIRMATION_LABEL={})),t.shortcutsConfirmationChoices=[{label:i.YES,description:"Pro-tip: take a minute to check the command above is really what you want"},{label:i.MORE_OPTIONS,description:'Pro-tip: you can set default values to "schematics" options in angular.json'},{label:i.NO}]},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentShortcut=t.COMPONENT_TYPE=void 0;const n=o(0),s=o(2),r=o(1),a=o(4);var c;!function(e){e.DEFAULT="$(thumbsdown) Default component",e.PAGE="$(preview) Page",e.PURE="$(zap) Pure component",e.EXPORTED="$(link-external) Exported component"}(c=t.COMPONENT_TYPE||(t.COMPONENT_TYPE={}));t.ComponentShortcut=class{constructor(){this.types=new Map}init(e){return i(this,void 0,void 0,(function*(){this.types.clear(),this.types.set(c.DEFAULT,{choice:{label:c.DEFAULT,detail:"Component with no special behavior (pro-tip: learn about component types in our documentation)"},options:new Map}),this.types.set(c.PAGE,{choice:{label:c.PAGE,detail:"Component associated to a route"},options:new Map([["type","page"],["skipSelector","true"]])}),this.types.set(c.PURE,{choice:{label:c.PURE,detail:"UI / presentation component, used only in its own feature module"},options:new Map([["changeDetection","OnPush"]])}),this.types.set(c.EXPORTED,{choice:{label:c.EXPORTED,detail:"UI / presentation component, declared in a shared UI module and used in multiple feature modules"},options:new Map([["export","true"],["changeDetection","OnPush"]])});for(const t of yield this.getCustomComponentTypes(e))this.types.set(t.label,{choice:{label:t.label,detail:t.detail},options:new Map(t.options)});for(const[,e]of this.types)e.choice.description=a.formatCliCommandOptions(e.options)||"No pre-filled option"}))}getCustomComponentTypes(e){return i(this,void 0,void 0,(function*(){const t=new Map;for(const o of s.defaultComponentTypes)(yield r.FileSystem.findPackageFsPath(e,e.uri.fsPath,o.package,{silent:!0}))&&t.set(o.label,o);let o=n.workspace.getConfiguration("ngschematics",e.uri).get("componentTypes",[]);if(""===o&&(o=[]),Array.isArray(o)){r.Output.logInfo(o.length+" custom component type(s) detected in the preferences.");for(const e of o){const o=this.validateUserComponentType(e);o&&(t.has(o.label)&&r.Output.logWarning(`"${o.label}" component type already exists.`),t.set(o.label,o),r.Output.logInfo(`Adding "${o.label}" custom component type.`))}}else r.Output.logWarning('"ngschematics.componentTypes" option has changed in version >= 4. See the changelog to update it.'),o=[];return Array.from(t.values())}))}validateUserComponentType(e){const t=r.JsonValidator.object(e),o=r.JsonValidator.string(null==t?void 0:t.label),i=r.JsonValidator.array(null==t?void 0:t.options);if(!o||!i)return;const n=[];for(const e of i){const t=r.JsonValidator.array(e);if(!t||2!==t.length)return;const o=r.JsonValidator.string(t[0]),i=r.JsonValidator.string(t[1]);if(!o||void 0===i)return;n.push([o,i])}return{label:o,detail:r.JsonValidator.string(null==t?void 0:t.detail),options:n,package:""}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleShortcut=t.MODULE_TYPE=void 0;const i=o(4);var n;!function(e){e.DEFAULT="$(extensions) Module of components",e.LAZY="$(zap) Lazy-loaded module of pages",e.ROUTING="$(files) Classic module of pages"}(n=t.MODULE_TYPE||(t.MODULE_TYPE={}));t.ModuleShortcut=class{constructor(){this.types=new Map}init(e){this.types.clear(),this.types.set(n.DEFAULT,{choice:{label:n.DEFAULT,detail:"Module of UI / presentation components"},options:new Map}),e&&this.types.set(n.LAZY,{choice:{label:n.LAZY,detail:"Module with routing, lazy-loaded"},options:new Map([["module","app"]])}),this.types.set(n.ROUTING,{choice:{label:n.ROUTING,detail:"Module with routing, immediately loaded"},options:new Map([["module","app"],["routing","true"]])});for(const[,e]of this.types)e.choice.description=i.formatCliCommandOptions(e.options)||"No pre-filled option"}}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CliCommand=void 0;const n=o(0),s=o(3),r=o(2),a=o(1),c=o(7);t.CliCommand=class{constructor(e,t){this.workspaceFolder=e,this.contextPath={full:"",relativeToWorkspaceFolder:"",relativeToProjectFolder:""},this.baseCommand="ng g",this.projectName="",this.collectionName=r.angularCollectionName,this.schematicName="",this.nameAsFirstArg="",this.options=new Map,this.setContextPathAndProject(t)}getCommand(){return[this.baseCommand,this.formatSchematicNameForCommand(),this.nameAsFirstArg,c.formatCliCommandOptions(this.options)].join(" ").trim()}setCollectionName(e){this.collectionName=e}setSchematic(e){return i(this,void 0,void 0,(function*(){this.schematicName=e.getName(),this.schematic=e}))}getProjectName(){return this.projectName}getProjectSourcePath(){var e;const t=this.projectName?this.workspaceFolder.getAngularProject(this.projectName).getAppOrLibPath():null!==(e=this.options.get("path"))&&void 0!==e?e:"src/app";return s.join(this.workspaceFolder.uri.fsPath,t)}setProjectName(e){this.projectName=e}validateProject(){return i(this,void 0,void 0,(function*(){if(this.projectName)this.schematic.hasOption("project")&&!this.workspaceFolder.isRootAngularProject(this.projectName)&&this.options.set("project",this.projectName);else{const e=new n.RelativePattern(this.workspaceFolder,"**/app.module.ts"),t=yield n.workspace.findFiles(e,"**/node_modules/**",1);if(!(t.length>0))return a.Output.logWarning('No Angular project or "app.module.ts" detected.'),!1;{const e=t[0].fsPath.substr(this.workspaceFolder.uri.fsPath.length+1),o=s.posix.normalize(s.dirname(e).replace(/\\/g,"/"));this.options.set("path",o),a.Output.logInfo('"app.module.ts" detected in: '+o)}}return!0}))}getContextForNameAsFirstArg(){if(this.collectionName===r.angularCollectionName&&["application","library"].includes(this.schematicName))return"";if("ngx-spec"===this.collectionName&&"spec"===this.schematicName)return this.contextPath.relativeToProjectFolder;if("ngx-spec"===this.collectionName)return"";const e=a.FileSystem.removeFilename(this.contextPath.relativeToProjectFolder);return["","."].includes(e)?"":e+"/"}getRouteFromFirstArg(){return s.posix.basename(this.nameAsFirstArg)}setNameAsFirstArg(e){this.nameAsFirstArg=e}addOptions(e){for(const[t,o]of e)this.schematic.hasOption(t)?this.options.set(t,o):a.Output.logWarning(`"--${t}" option has been chosen but does not exist in this schematic, so it won't be used.`)}launchCommand(){a.Output.logInfo("Launching this command: "+this.getCommand()),a.Terminal.send(this.workspaceFolder,this.getCommand())}guessGereratedFileFsPath(){let e="";if(this.nameAsFirstArg){const t=this.getProjectSourcePath();let o="."+this.schematicName;this.collectionName===r.angularCollectionName?["component","class","interface"].includes(this.schematicName)&&this.options.has("type")?o="."+this.options.get("type"):["class","interface"].includes(this.schematicName)?o="":"webWorker"===this.schematicName&&(o=".worker"):["@angular/material","@angular/cdk"].includes(this.collectionName)?o=".component":"@ngrx/schematics"===this.collectionName&&(["action","effect","selector"].includes(this.schematicName)?o=`.${this.schematicName}s`:"entity"===this.schematicName?o=".model":"entity"===this.schematicName?o=".actions":"container"===this.schematicName?o=".component":"data"===this.schematicName&&(o=".service"));const i=s.posix.dirname(this.nameAsFirstArg),n=s.posix.basename(this.nameAsFirstArg),a=`${n}${o}.ts`;let c=!0;if(this.options.has("flat"))c="false"!==this.options.get("flat");else{const e=this.workspaceFolder.getSchematicsOptionDefaultValue(this.projectName,this.getFullSchematicName(),"flat");if(void 0!==e)c=e;else{const e=this.schematic.getOptionDefaultValue("flat");void 0!==e?c=e:(this.collectionName===r.angularCollectionName&&["component","module"].includes(this.schematicName)||"@ngxs/schematics"===this.collectionName)&&(c=!1)}}const l=c?s.join(t,i):s.join(t,i,n);e=s.join(l,a)}return a.Output.logInfo("Guessed generated file path: "+e),e}getFullSchematicName(){return`${this.collectionName}:${this.schematicName}`}formatSchematicNameForCommand(){return this.collectionName!==this.workspaceFolder.getDefaultUserCollection()?this.getFullSchematicName():this.schematicName}setContextPathAndProject(e){if(e){this.contextPath.full=e,a.Output.logInfo("Full context path detected: "+this.contextPath.full),this.contextPath.relativeToWorkspaceFolder=this.contextPath.full.substr(this.workspaceFolder.uri.path.length+1),a.Output.logInfo("Workspace folder-relative context path detected: "+this.contextPath.relativeToWorkspaceFolder);for(const[e,t]of this.workspaceFolder.getAngularProjects())if(this.contextPath.relativeToWorkspaceFolder.startsWith(t.getAppOrLibPath())){this.projectName=e,this.contextPath.relativeToProjectFolder=this.contextPath.relativeToWorkspaceFolder.substr(t.getAppOrLibPath().length+1);break}if(!this.projectName)for(const[e,t]of this.workspaceFolder.getAngularProjects())if(this.contextPath.relativeToWorkspaceFolder.startsWith(t.getSourcePath())){this.projectName=e;break}if(!this.projectName)for(const[e,t]of this.workspaceFolder.getAngularProjects())if(""!==t.getRootPath()&&this.contextPath.relativeToWorkspaceFolder.startsWith(t.getRootPath())){this.projectName=e;break}this.projectName?(a.Output.logInfo("Source-relative context path detected: "+this.contextPath.relativeToProjectFolder),a.Output.logInfo(`Angular project detected from context path: "${this.projectName}"`)):a.Output.logInfo("No Angular project detected from context path.")}else a.Output.logInfo("No context path detected.")}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(28);Object.defineProperty(t,"Collections",{enumerable:!0,get:function(){return i.Collections}});var n=o(10);Object.defineProperty(t,"Collection",{enumerable:!0,get:function(){return n.Collection}});var s=o(11);Object.defineProperty(t,"Schematic",{enumerable:!0,get:function(){return s.Schematic}})},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Collections=void 0;const n=o(0),s=o(2),r=o(1),a=o(10),c=o(12);t.Collections=class{constructor(){this.list=new Map}init(e,t){return i(this,void 0,void 0,(function*(){return yield this.setList(e,t)}))}getCollectionsNames(){return Array.from(this.list.keys())}getCollection(e){return this.list.get(e)}setList(e,t){var o;return i(this,void 0,void 0,(function*(){r.Output.logInfo("Loading the list of schematics collections."),this.list.clear();const i=[],l=n.workspace.getConfiguration("ngschematics",e.uri).get("schematics",[]),u=null!==(o=r.JsonValidator.array(l,"string"))&&void 0!==o?o:[];r.Output.logInfo(`${u.length} user schematics collection(s) detected in Code preferences${u.length>0?": "+u.join(", "):""}`);const d=Array.from(new Set([...t,...s.defaultCollectionsNames,...u])),h=[];for(const o of d){const i=!t.includes(o)&&!u.includes(o),n=yield c.findCollectionFsPath(e,o,{silent:i});n&&h.push({name:o,fsPath:n})}h.length>0?r.Output.logInfo(`${h.length} installed collection(s) detected: ${h.map(e=>e.name).join(", ")}`):r.Output.logError(`No collection found. "${s.angularCollectionName}" should be present in a correctly installed Angular CLI project. If you are in a non-Angular CLI project, try to run in the Terminal: "npm install ${s.angularCollectionName} --save-dev"`);for(const t of h){r.Output.logInfo(`Loading "${t.name}" collection.`);const o=new a.Collection(t.name);try{const n=yield o.init(e,t.fsPath);this.list.set(t.name,o),n&&i.push(n)}catch(e){r.Output.logError(e.message)}}return i}))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(30);Object.defineProperty(t,"AngularConfig",{enumerable:!0,get:function(){return i.AngularConfig}});var n=o(13);Object.defineProperty(t,"AngularProject",{enumerable:!0,get:function(){return n.AngularProject}});var s=o(14);Object.defineProperty(t,"TslintConfig",{enumerable:!0,get:function(){return s.TslintConfig}})},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AngularConfig=void 0;const n=o(0),s=o(2),r=o(1),a=o(13);t.AngularConfig=class{constructor(){this.schematicsDefaults=new Map,this.projects=new Map,this.defaultUserCollection=s.angularCollectionName,this.defaultCollections=[],this.rootProjectName=""}init(e,t){return i(this,void 0,void 0,(function*(){const o=yield r.FileSystem.parseJsonFile(t),i=this.validateConfig(o);this.initDefaultCollections(i),r.Output.logInfo("Default schematics collection detected in your Angular config: "+this.defaultUserCollection),this.initSchematicsDefaults(i),r.Output.logInfo(i.projects.size+" Angular project(s) detected.");const s=yield this.setProjects(e,i);return s.push(n.workspace.createFileSystemWatcher(t)),s}))}getSchematicsOptionDefaultValue(e,t){var o,i;return null===(i=null===(o=null==this?void 0:this.schematicsDefaults)||void 0===o?void 0:o.get(e))||void 0===i?void 0:i[t]}validateConfig(e){var t,o,i;const n=null!==(t=r.JsonValidator.object(e))&&void 0!==t?t:{},s=r.JsonValidator.number(n.version);if(!s)throw r.Output.logError('Your Angular config file must contain `"version" : 1`, please correct it.'),new Error;const a=["application","library"],c=new Map(Object.entries(null!==(o=r.JsonValidator.object(n.projects))&&void 0!==o?o:{}).filter(([e])=>!e.endsWith("-e2e")).map(([e,t])=>{var o,i;const n=null!==(o=r.JsonValidator.object(t))&&void 0!==o?o:{},s=null!==(i=r.JsonValidator.string(n.projectType))&&void 0!==i?i:"";let c="application";a.includes(s)?c=s:r.Output.logWarning(`Your Angular configuration file should contain a "projectType" property with "application" or "library" for your "${e}" project. Default to "application".`);let l=r.JsonValidator.string(n.root);return void 0===l&&(l="",r.Output.logWarning(`Your Angular configuration file should contain a "root" string property for your "${e}" project. Default to "".`)),[e,{projectType:c,root:l,sourceRoot:r.JsonValidator.string(n.sourceRoot),schematics:this.validateConfigSchematics(n.schematics)}]}));return 0===c.size&&r.Output.logWarning('No "projects" detected in your Angular config file. You should correct that.'),{version:s,cli:{defaultCollection:r.JsonValidator.string(null===(i=r.JsonValidator.object(n.cli))||void 0===i?void 0:i.defaultCollection)},schematics:this.validateConfigSchematics(n.schematics),projects:c}}validateConfigSchematics(e){var t;return new Map(Object.entries(null!==(t=r.JsonValidator.object(e))&&void 0!==t?t:{}).map(([e,t])=>{var o;return[e,{flat:r.JsonValidator.boolean(null===(o=r.JsonValidator.object(t))||void 0===o?void 0:o.flat)}]}))}initDefaultCollections(e){var t,o;this.defaultUserCollection=null!==(o=null===(t=e.cli)||void 0===t?void 0:t.defaultCollection)&&void 0!==o?o:s.angularCollectionName,this.defaultCollections=Array.from(new Set([this.defaultUserCollection,s.angularCollectionName]))}initSchematicsDefaults(e){this.schematicsDefaults=e.schematics}setProjects(e,t){return i(this,void 0,void 0,(function*(){this.rootProjectName="",this.projects.clear();const o=[];for(const[i,n]of t.projects){const t=new a.AngularProject(i,n);o.push(yield t.init(e)),this.projects.set(i,t),this.rootProjectName||""!==n.root||(this.rootProjectName=i,r.Output.logInfo(`"${i}" project is the root Angular project.`))}return o}))}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(32);Object.defineProperty(t,"SchematicsTreeDataProvider",{enumerable:!0,get:function(){return i.SchematicsTreeDataProvider}})},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SchematicsTreeDataProvider=void 0;const n=o(0),s=o(3),r=o(5);t.SchematicsTreeDataProvider=class{constructor(){this.iconPath="",this.collections=new Map;const e=n.extensions.getExtension("cyrilletuzi.angular-schematics");this.iconPath=s.join(e.extensionPath,"angular.svg")}getTreeItem(e){return e}getChildren(e){return i(this,void 0,void 0,(function*(){if(e){const t=this.collections.get(e.label);return t.getSchematicsNames().map(e=>{const o=new n.TreeItem(e,n.TreeItemCollapsibleState.None);return o.command={title:"Generate "+e,command:"ngschematics.generate",arguments:[void 0,{collectionName:t.getName(),schematicName:e}]},o.iconPath=this.iconPath,o})}for(const[,e]of r.Workspace.folders)for(const[t,o]of e.collections.list)this.collections.has(t)||this.collections.set(t,o);return Array.from(this.collections.keys()).map(e=>new n.TreeItem(e,n.TreeItemCollapsibleState.Expanded))}))}}}]);
//# sourceMappingURL=extension.js.map