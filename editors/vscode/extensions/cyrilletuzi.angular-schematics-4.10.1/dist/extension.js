module.exports=(()=>{"use strict";var e={516:(e,t,o)=>{function n(e,t){void 0===t&&(t=!1);var o=e.length,n=0,s="",c=0,l=16,u=0,h=0,d=0,f=0,p=0;function m(t,o){for(var i=0,r=0;i<t||!o;){var a=e.charCodeAt(n);if(a>=48&&a<=57)r=16*r+a-48;else if(a>=65&&a<=70)r=16*r+a-65+10;else{if(!(a>=97&&a<=102))break;r=16*r+a-97+10}n++,i++}return i<t&&(r=-1),r}function g(){if(s="",p=0,c=n,h=u,f=d,n>=o)return c=o,l=17;var t=e.charCodeAt(n);if(i(t)){do{n++,s+=String.fromCharCode(t),t=e.charCodeAt(n)}while(i(t));return l=15}if(r(t))return n++,s+=String.fromCharCode(t),13===t&&10===e.charCodeAt(n)&&(n++,s+="\n"),u++,d=n,l=14;switch(t){case 123:return n++,l=1;case 125:return n++,l=2;case 91:return n++,l=3;case 93:return n++,l=4;case 58:return n++,l=6;case 44:return n++,l=5;case 34:return n++,s=function(){for(var t="",i=n;;){if(n>=o){t+=e.substring(i,n),p=2;break}var a=e.charCodeAt(n);if(34===a){t+=e.substring(i,n),n++;break}if(92!==a){if(a>=0&&a<=31){if(r(a)){t+=e.substring(i,n),p=2;break}p=6}n++}else{if(t+=e.substring(i,n),++n>=o){p=2;break}switch(e.charCodeAt(n++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var s=m(4,!0);s>=0?t+=String.fromCharCode(s):p=4;break;default:p=5}i=n}}return t}(),l=10;case 47:var g=n-1;if(47===e.charCodeAt(n+1)){for(n+=2;n<o&&!r(e.charCodeAt(n));)n++;return s=e.substring(g,n),l=12}if(42===e.charCodeAt(n+1)){n+=2;for(var y=o-1,w=!1;n<y;){var C=e.charCodeAt(n);if(42===C&&47===e.charCodeAt(n+1)){n+=2,w=!0;break}n++,r(C)&&(13===C&&10===e.charCodeAt(n)&&n++,u++,d=n)}return w||(n++,p=1),s=e.substring(g,n),l=13}return s+=String.fromCharCode(t),n++,l=16;case 45:if(s+=String.fromCharCode(t),++n===o||!a(e.charCodeAt(n)))return l=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=function(){var t=n;if(48===e.charCodeAt(n))n++;else for(n++;n<e.length&&a(e.charCodeAt(n));)n++;if(n<e.length&&46===e.charCodeAt(n)){if(!(++n<e.length&&a(e.charCodeAt(n))))return p=3,e.substring(t,n);for(n++;n<e.length&&a(e.charCodeAt(n));)n++}var o=n;if(n<e.length&&(69===e.charCodeAt(n)||101===e.charCodeAt(n)))if((++n<e.length&&43===e.charCodeAt(n)||45===e.charCodeAt(n))&&n++,n<e.length&&a(e.charCodeAt(n))){for(n++;n<e.length&&a(e.charCodeAt(n));)n++;o=n}else p=3;return e.substring(t,o)}(),l=11;default:for(;n<o&&v(t);)n++,t=e.charCodeAt(n);if(c!==n){switch(s=e.substring(c,n)){case"true":return l=8;case"false":return l=9;case"null":return l=7}return l=16}return s+=String.fromCharCode(t),n++,l=16}}function v(e){if(i(e)||r(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){n=e,s="",c=0,l=16,p=0},getPosition:function(){return n},scan:t?function(){var e;do{e=g()}while(e>=12&&e<=15);return e}:g,getToken:function(){return l},getTokenValue:function(){return s},getTokenOffset:function(){return c},getTokenLength:function(){return n-c},getTokenStartLine:function(){return h},getTokenStartCharacter:function(){return c-f},getTokenError:function(){return p}}}function i(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function r(e){return 10===e||13===e||8232===e||8233===e}function a(e){return e>=48&&e<=57}function s(e,t,o){var i,r,a,s,u;if(t){for(s=t.offset,u=s+t.length,a=s;a>0&&!l(e,a-1);)a--;for(var h=u;h<e.length&&!l(e,h);)h++;r=e.substring(a,h),i=function(e,t){for(var o=0,n=0,i=t.tabSize||4;o<e.length;){var r=e.charAt(o);if(" "===r)n++;else{if("\t"!==r)break;n+=i}o++}return Math.floor(n/i)}(r,o)}else r=e,i=0,a=0,s=0,u=e.length;var d,f=function(e,t){for(var o=0;o<t.length;o++){var n=t.charAt(o);if("\r"===n)return o+1<t.length&&"\n"===t.charAt(o+1)?"\r\n":"\r";if("\n"===n)return"\n"}return e&&e.eol||"\n"}(o,e),p=!1,m=0;d=o.insertSpaces?c(" ",o.tabSize||4):"\t";var g=n(r,!1),v=!1;function y(){return f+c(d,i+m)}function w(){var e=g.scan();for(p=!1;15===e||14===e;)p=p||14===e,e=g.scan();return v=16===e||0!==g.getTokenError(),e}var C=[];function O(o,n,i){v||t&&!(n<u&&i>s)||e.substring(n,i)===o||C.push({offset:n,length:i-n,content:o})}var b=w();if(17!==b){var k=g.getTokenOffset()+a;O(c(d,i),a,k)}for(;17!==b;){for(var P=g.getTokenOffset()+g.getTokenLength()+a,j=w(),A="",N=!1;!p&&(12===j||13===j);)O(" ",P,g.getTokenOffset()+a),P=g.getTokenOffset()+g.getTokenLength()+a,A=(N=12===j)?y():"",j=w();if(2===j)1!==b&&(m--,A=y());else if(4===j)3!==b&&(m--,A=y());else{switch(b){case 3:case 1:m++,A=y();break;case 5:case 12:A=y();break;case 13:p?A=y():N||(A=" ");break;case 6:N||(A=" ");break;case 10:if(6===j){N||(A="");break}case 7:case 8:case 9:case 11:case 2:case 4:12===j||13===j?N||(A=" "):5!==j&&17!==j&&(v=!0);break;case 16:v=!0}!p||12!==j&&13!==j||(A=y())}17===j&&(A=o.insertFinalNewline?f:""),O(A,P,g.getTokenOffset()+a),b=j}return C}function c(e,t){for(var o="",n=0;n<t;n++)o+=e;return o}function l(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var u;function h(e,t,o){void 0===t&&(t=[]),void 0===o&&(o=u.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(e){"property"===n.type&&(n.length=e-n.offset,n=n.parent)}function r(e){return n.children.push(e),e}f(e,{onObjectBegin:function(e){n=r({type:"object",offset:e,length:-1,parent:n,children:[]})},onObjectProperty:function(e,t,o){(n=r({type:"property",offset:t,length:-1,parent:n,children:[]})).children.push({type:"string",value:e,offset:t,length:o,parent:n})},onObjectEnd:function(e,t){i(e+t),n.length=e+t-n.offset,n=n.parent,i(e+t)},onArrayBegin:function(e,t){n=r({type:"array",offset:e,length:-1,parent:n,children:[]})},onArrayEnd:function(e,t){n.length=e+t-n.offset,n=n.parent,i(e+t)},onLiteralValue:function(e,t,o){r({type:p(e),offset:t,length:o,parent:n,value:e}),i(t+o)},onSeparator:function(e,t,o){"property"===n.type&&(":"===e?n.colonOffset=t:","===e&&i(t))},onError:function(e,o,n){t.push({error:e,offset:o,length:n})}},o);var a=n.children[0];return a&&delete a.parent,a}function d(e,t){if(e){for(var o=e,n=0,i=t;n<i.length;n++){var r=i[n];if("string"==typeof r){if("object"!==o.type||!Array.isArray(o.children))return;for(var a=!1,s=0,c=o.children;s<c.length;s++){var l=c[s];if(Array.isArray(l.children)&&l.children[0].value===r){o=l.children[1],a=!0;break}}if(!a)return}else{var u=r;if("array"!==o.type||u<0||!Array.isArray(o.children)||u>=o.children.length)return;o=o.children[u]}}return o}}function f(e,t,o){void 0===o&&(o=u.DEFAULT);var i=n(e,!1);function r(e){return e?function(){return e(i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}function a(e){return e?function(t){return e(t,i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}var s=r(t.onObjectBegin),c=a(t.onObjectProperty),l=r(t.onObjectEnd),h=r(t.onArrayBegin),d=r(t.onArrayEnd),f=a(t.onLiteralValue),p=a(t.onSeparator),m=r(t.onComment),g=a(t.onError),v=o&&o.disallowComments,y=o&&o.allowTrailingComma;function w(){for(;;){var e=i.scan();switch(i.getTokenError()){case 4:C(14);break;case 5:C(15);break;case 3:C(13);break;case 1:v||C(11);break;case 2:C(12);break;case 6:C(16)}switch(e){case 12:case 13:v?C(10):m();break;case 16:C(1);break;case 15:case 14:break;default:return e}}}function C(e,t,o){if(void 0===t&&(t=[]),void 0===o&&(o=[]),g(e),t.length+o.length>0)for(var n=i.getToken();17!==n;){if(-1!==t.indexOf(n)){w();break}if(-1!==o.indexOf(n))break;n=w()}}function O(e){var t=i.getTokenValue();return e?f(t):c(t),w(),!0}return w(),17===i.getToken()?!!o.allowEmptyContent||(C(4,[],[]),!1):function e(){switch(i.getToken()){case 3:return function(){h(),w();for(var t=!1;4!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(t||C(4,[],[]),p(","),w(),4===i.getToken()&&y)break}else t&&C(6,[],[]);e()||C(4,[],[4,5]),t=!0}return d(),4!==i.getToken()?C(8,[4],[]):w(),!0}();case 1:return function(){s(),w();for(var t=!1;2!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(t||C(4,[],[]),p(","),w(),2===i.getToken()&&y)break}else t&&C(6,[],[]);(10!==i.getToken()?(C(3,[],[2,5]),0):(O(!1),6===i.getToken()?(p(":"),w(),e()||C(4,[],[2,5])):C(5,[],[2,5]),1))||C(4,[],[2,5]),t=!0}return l(),2!==i.getToken()?C(7,[2],[]):w(),!0}();case 10:return O(!0);default:return function(){switch(i.getToken()){case 11:var e=i.getTokenValue(),t=Number(e);isNaN(t)&&(C(2),t=0),f(t);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return w(),!0}()}}()?(17!==i.getToken()&&C(9,[],[]),!0):(C(4,[],[]),!1)}function p(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}function m(e,t,o){if(!o.formattingOptions)return[t];var n=g(e,t),i=t.offset,r=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;i>0&&!l(n,i-1);)i--;for(;r<n.length&&!l(n,r);)r++}for(var a=s(n,{offset:i,length:r-i},o.formattingOptions),c=a.length-1;c>=0;c--){var u=a[c];n=g(n,u),i=Math.min(i,u.offset),r=Math.max(r,u.offset+u.length),r+=u.content.length-u.length}return[{offset:i,length:e.length-(n.length-r)-i,content:n.substring(i,r)}]}function g(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}o.r(t),o.d(t,{applyEdits:()=>T,createScanner:()=>v,findNodeAtLocation:()=>O,findNodeAtOffset:()=>b,format:()=>S,getLocation:()=>y,getNodePath:()=>k,getNodeValue:()=>P,modify:()=>F,parse:()=>w,parseTree:()=>C,printParseErrorCode:()=>N,stripComments:()=>A,visit:()=>j}),function(e){e.DEFAULT={allowTrailingComma:!1}}(u||(u={}));var v=n,y=function(e,t){var o=[],n=new Object,i=void 0,r={value:{},offset:0,length:0,type:"object",parent:void 0},a=!1;function s(e,t,o,n){r.value=e,r.offset=t,r.length=o,r.type=n,r.colonOffset=void 0,i=r}try{f(e,{onObjectBegin:function(e,r){if(t<=e)throw n;i=void 0,a=t>e,o.push("")},onObjectProperty:function(e,i,r){if(t<i)throw n;if(s(e,i,r,"property"),o[o.length-1]=e,t<=i+r)throw n},onObjectEnd:function(e,r){if(t<=e)throw n;i=void 0,o.pop()},onArrayBegin:function(e,r){if(t<=e)throw n;i=void 0,o.push(0)},onArrayEnd:function(e,r){if(t<=e)throw n;i=void 0,o.pop()},onLiteralValue:function(e,o,i){if(t<o)throw n;if(s(e,o,i,p(e)),t<=o+i)throw n},onSeparator:function(e,r,s){if(t<=r)throw n;if(":"===e&&i&&"property"===i.type)i.colonOffset=r,a=!1,i=void 0;else if(","===e){var c=o[o.length-1];"number"==typeof c?o[o.length-1]=c+1:(a=!0,o[o.length-1]=""),i=void 0}}})}catch(e){if(e!==n)throw e}return{path:o,previousNode:i,isAtPropertyKey:a,matches:function(e){for(var t=0,n=0;t<e.length&&n<o.length;n++)if(e[t]===o[n]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},w=function(e,t,o){void 0===t&&(t=[]),void 0===o&&(o=u.DEFAULT);var n=null,i=[],r=[];function a(e){Array.isArray(i)?i.push(e):null!==n&&(i[n]=e)}return f(e,{onObjectBegin:function(){var e={};a(e),r.push(i),i=e,n=null},onObjectProperty:function(e){n=e},onObjectEnd:function(){i=r.pop()},onArrayBegin:function(){var e=[];a(e),r.push(i),i=e,n=null},onArrayEnd:function(){i=r.pop()},onLiteralValue:a,onError:function(e,o,n){t.push({error:e,offset:o,length:n})}},o),i[0]},C=h,O=d,b=function e(t,o,n){if(void 0===n&&(n=!1),function(e,t,o){return void 0===o&&(o=!1),t>=e.offset&&t<e.offset+e.length||o&&t===e.offset+e.length}(t,o,n)){var i=t.children;if(Array.isArray(i))for(var r=0;r<i.length&&i[r].offset<=o;r++){var a=e(i[r],o,n);if(a)return a}return t}},k=function e(t){if(!t.parent||!t.parent.children)return[];var o=e(t.parent);if("property"===t.parent.type){var n=t.parent.children[0].value;o.push(n)}else if("array"===t.parent.type){var i=t.parent.children.indexOf(t);-1!==i&&o.push(i)}return o},P=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var o=Object.create(null),n=0,i=t.children;n<i.length;n++){var r=i[n],a=r.children[1];a&&(o[r.children[0].value]=e(a))}return o;case"null":case"string":case"number":case"boolean":return t.value;default:return}},j=f,A=function(e,t){var o,i,r=n(e),a=[],s=0;do{switch(i=r.getPosition(),o=r.scan()){case 12:case 13:case 17:s!==i&&a.push(e.substring(s,i)),void 0!==t&&a.push(r.getTokenValue().replace(/[^\r\n]/g,t)),s=r.getPosition()}}while(17!==o);return a.join("")};function N(e){switch(e){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}function S(e,t,o){return s(e,t,o)}function F(e,t,o,n){return function(e,t,o,n){for(var i,r=t.slice(),a=h(e,[]),s=void 0,c=void 0;r.length>0&&(c=r.pop(),void 0===(s=d(a,r))&&void 0!==o);)"string"==typeof c?((i={})[c]=o,o=i):o=[o];if(s){if("object"===s.type&&"string"==typeof c&&Array.isArray(s.children)){var l=d(s,[c]);if(void 0!==l){if(void 0===o){if(!l.parent)throw new Error("Malformed AST");var u=s.children.indexOf(l.parent),f=void 0,p=l.parent.offset+l.parent.length;return u>0?f=(k=s.children[u-1]).offset+k.length:(f=s.offset+1,s.children.length>1&&(p=s.children[1].offset)),m(e,{offset:f,length:p-f,content:""},n)}return m(e,{offset:l.offset,length:l.length,content:JSON.stringify(o)},n)}if(void 0===o)return[];var g=JSON.stringify(c)+": "+JSON.stringify(o),v=void 0;return m(e,v=(P=n.getInsertionIndex?n.getInsertionIndex(s.children.map((function(e){return e.children[0].value}))):s.children.length)>0?{offset:(k=s.children[P-1]).offset+k.length,length:0,content:","+g}:0===s.children.length?{offset:s.offset+1,length:0,content:g}:{offset:s.offset+1,length:0,content:g+","},n)}if("array"===s.type&&"number"==typeof c&&Array.isArray(s.children)){var y=c;if(-1===y)return g=""+JSON.stringify(o),v=void 0,m(e,v=0===s.children.length?{offset:s.offset+1,length:0,content:g}:{offset:(k=s.children[s.children.length-1]).offset+k.length,length:0,content:","+g},n);if(void 0===o&&s.children.length>=0){var w=c,C=s.children[w];if(v=void 0,1===s.children.length)v={offset:s.offset+1,length:s.length-2,content:""};else if(s.children.length-1===w){var O=(k=s.children[w-1]).offset+k.length;v={offset:O,length:s.offset+s.length-2-O,content:""}}else v={offset:C.offset,length:s.children[w+1].offset-C.offset,content:""};return m(e,v,n)}if(void 0!==o){if(v=void 0,g=""+JSON.stringify(o),!n.isArrayInsertion&&s.children.length>c){var b=s.children[c];v={offset:b.offset,length:b.length,content:g}}else if(0===s.children.length||0===c)v={offset:s.offset+1,length:0,content:0===s.children.length?g:g+","};else{var k,P=c>s.children.length?s.children.length:c;v={offset:(k=s.children[P-1]).offset+k.length,length:0,content:","+g}}return m(e,v,n)}throw new Error("Can not "+(void 0===o?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+y+" as length is not sufficient")}throw new Error("Can not add "+("number"!=typeof c?"index":"property")+" to parent of type "+s.type)}if(void 0===o)throw new Error("Can not delete in empty document");return m(e,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(o)},n)}(e,t,o,n)}function T(e,t){for(var o=t.length-1;o>=0;o--)e=g(e,t[o]);return e}},63:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extensionName=t.angularConfigFileNames=t.angularCollectionName=t.defaultComponentTypes=t.defaultCollectionsNames=void 0,t.defaultCollectionsNames=["@angular/material","@angular/cdk","@ionic/angular-toolkit","@ngrx/schematics","@ngxs/schematics","@nativescript/schematics","@ngx-formly/schematics","primeng-schematics","@ngx-kit/collection","ngx-spec","./schematics/collection.json"],t.defaultComponentTypes=[{label:"Dialog",options:[["type","dialog"],["skipSelector","true"]],package:"@angular/material",detail:"Angular Material dialog"},{label:"Snackbar",options:[["type","snackbar"],["skipSelector","true"]],package:"@angular/material",detail:"Angular Material snackbar"},{label:"Bottomsheet",options:[["type","bottomsheet"],["skipSelector","true"]],package:"@angular/material",detail:"Angular Material bottomsheet"},{label:"Modal",options:[["type","modal"],["skipSelector","true"]],package:"@ionic/angular",detail:"Ionic modal"},{label:"Popover",options:[["type","popover"],["skipSelector","true"]],package:"@ionic/angular",detail:"Ionic popover"},{label:"Dynamic Dialog",options:[["type","dialog"],["skipSelector","true"]],package:"primeng",detail:"PrimeNG dynamic dialog"}],t.angularCollectionName="@schematics/angular",t.angularConfigFileNames=["angular.json",".angular.json","angular-cli.json",".angular-cli.json"],t.extensionName="Angular Schematics"},112:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const n=o(549),i=o(63),r=o(928),a=o(86),s=o(150),c=o(132);let l;t.activate=function(e){r.Output.logInfo(`${i.extensionName} extension has been activated.`),n.commands.executeCommand("setContext","inAngularProject",!0).then((()=>{}),(()=>{})),a.Workspace.init().catch((()=>{})),a.Workspace.whenStable().then((()=>{l=n.window.createTreeView("angular-schematics",{treeDataProvider:new c.SchematicsTreeDataProvider}),l.message="Hello! While this list is useful to see all the schematics available,\n        it is easier to launch a generation with a right-click on a folder in the Explorer,\n        as then the extension will infer the workspace folder, the path and the project."})).catch((()=>{})),r.Terminals.init(),e.subscriptions.push(n.commands.registerCommand("ngschematics.generateComponent",(e=>{r.Output.logInfo("Starting journey to generate a component."),(new s.UserJourney).start(e,i.angularCollectionName,"component").catch((()=>{}))})),n.commands.registerCommand("ngschematics.generateService",(e=>{r.Output.logInfo("Starting journey to generate a service."),(new s.UserJourney).start(e,i.angularCollectionName,"service").catch((()=>{}))})),n.commands.registerCommand("ngschematics.generateModule",(e=>{r.Output.logInfo("Starting journey to generate a module."),(new s.UserJourney).start(e,i.angularCollectionName,"module").catch((()=>{}))})),n.commands.registerCommand("ngschematics.generate",((e,t)=>{r.Output.logInfo("Starting journey to generate a schematics."),(new s.UserJourney).start(e,null==t?void 0:t.collectionName,null==t?void 0:t.schematicName).catch((()=>{}))})))},t.deactivate=function(){for(const[,e]of a.Workspace.folders)e.disposeWatchers();r.Terminals.disposeAll(),r.Output.dispose(),null==l||l.dispose()}},859:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CliCommand=void 0;const i=o(549),r=o(622),a=o(63),s=o(928),c=o(457);t.CliCommand=class{constructor(e,t){this.workspaceFolder=e,this.contextPath={relativeToWorkspaceFolder:"",relativeToProjectFolder:""},this.baseCommand="ng g",this.projectName="",this.collectionName=a.angularCollectionName,this.schematicName="",this.nameAsFirstArg="",this.options=new Map,this.setContextPathAndProject(t)}getCommand(){return[this.baseCommand,this.formatSchematicNameForCommand(),this.nameAsFirstArg,c.formatCliCommandOptions(this.options)].join(" ").trim()}setCollectionName(e){this.collectionName=e}setSchematic(e){this.schematicName=e.getName(),this.schematic=e}getProjectName(){return this.projectName}getProjectSourcePath(){return r.posix.join(this.workspaceFolder.uri.path,this.getRelativeProjectSourcePath())}getProjectSourceFsPath(){const e=s.FileSystem.convertRelativePathToRelativeFsPath(this.getRelativeProjectSourcePath());return r.join(this.workspaceFolder.uri.fsPath,e)}setProjectName(e){this.projectName=e}validateProject(){return n(this,void 0,void 0,(function*(){if(this.projectName)this.schematic.hasOption("project")&&!this.workspaceFolder.isRootAngularProject(this.projectName)&&this.options.set("project",this.projectName);else{const e=new i.RelativePattern(this.workspaceFolder,"**/app.module.ts"),t=yield i.workspace.findFiles(e,"**/node_modules/**",1);if(!(t.length>0))return s.Output.logWarning('No Angular project or "app.module.ts" detected.'),!1;{const e=r.posix.relative(this.workspaceFolder.uri.path,t[0].path),o=r.posix.dirname(e);this.options.set("path",o),s.Output.logInfo(`"app.module.ts" detected in: ${o}`)}}return!0}))}getContextForNameAsFirstArg(){if(this.collectionName===a.angularCollectionName&&["application","library"].includes(this.schematicName))return"";if("ngx-spec"===this.collectionName&&"spec"===this.schematicName)return this.contextPath.relativeToProjectFolder;if("ngx-spec"===this.collectionName)return"";const e=s.FileSystem.removeFilename(this.contextPath.relativeToProjectFolder);return["","."].includes(e)?"":`${e}/`}getRouteFromFirstArg(){return r.posix.basename(this.nameAsFirstArg)}setNameAsFirstArg(e){this.nameAsFirstArg=e}addOptions(e){for(const[t,o]of e)this.schematic.hasOption(t)?this.options.set(t,o):s.Output.logWarning(`"--${t}" option has been chosen but does not exist in this schematic, so it won't be used.`)}launchCommand({dryRun:e=!1}={}){s.Output.logInfo(`Launching this command: ${this.getCommand()}`);const t=`${this.getCommand()}${e?" --dry-run":""}`;s.Terminals.send(this.workspaceFolder,t)}guessGereratedFileFsPath(){let e="";if(this.nameAsFirstArg){const t=this.getProjectSourceFsPath();let o=`.${this.schematicName}`;this.collectionName===a.angularCollectionName?["component","class","interface"].includes(this.schematicName)&&this.options.has("type")?o=`.${this.options.get("type")}`:["class","interface"].includes(this.schematicName)?o="":"webWorker"===this.schematicName&&(o=".worker"):["@angular/material","@angular/cdk"].includes(this.collectionName)?o=".component":"@ngrx/schematics"===this.collectionName&&(["action","effect","selector"].includes(this.schematicName)?o=`.${this.schematicName}s`:"entity"===this.schematicName?o=".model":"container"===this.schematicName?o=".component":"data"===this.schematicName&&(o=".service"));const n=r.posix.dirname(this.nameAsFirstArg),i=s.FileSystem.convertRelativePathToRelativeFsPath(n),c=r.posix.basename(this.nameAsFirstArg),l=`${c}${o}.ts`;let u=!0;if(this.options.has("flat"))u="false"!==this.options.get("flat");else{const e=this.workspaceFolder.getSchematicsOptionDefaultValue(this.projectName,this.getFullSchematicName(),"flat");if(void 0!==e)u=e;else{const e=this.schematic.getOptionDefaultValue("flat");void 0!==e?u=e:(this.collectionName===a.angularCollectionName&&["component","module"].includes(this.schematicName)||"@ngxs/schematics"===this.collectionName)&&(u=!1)}}const h=u?r.join(t,i):r.join(t,i,c);e=r.join(h,l)}return s.Output.logInfo(`Guessed generated file path: ${e}`),e}getRelativeProjectSourcePath(){var e;const t=this.workspaceFolder.getAngularProject(this.projectName);return this.projectName&&t?t.getAppOrLibPath():null!==(e=this.options.get("path"))&&void 0!==e?e:"src/app"}getFullSchematicName(){return`${this.collectionName}:${this.schematicName}`}formatSchematicNameForCommand(){return this.collectionName!==this.workspaceFolder.getDefaultUserCollection()?this.getFullSchematicName():this.schematicName}setContextPathAndProject(e){if(e){s.Output.logInfo(`Full context fsPath detected: ${e}`),this.contextPath.relativeToWorkspaceFolder=s.FileSystem.convertRelativeFsPathToRelativePath(r.relative(this.workspaceFolder.uri.fsPath,e)),s.Output.logInfo(`Workspace folder-relative context path detected: ${this.contextPath.relativeToWorkspaceFolder}`);for(const[e,t]of this.workspaceFolder.getAngularProjects()){const o=t.getAppOrLibPath();if(this.contextPath.relativeToWorkspaceFolder.startsWith(o)){this.projectName=e,this.contextPath.relativeToProjectFolder=r.posix.relative(o,this.contextPath.relativeToWorkspaceFolder);break}}if(!this.projectName)for(const[e,t]of this.workspaceFolder.getAngularProjects())if(this.contextPath.relativeToWorkspaceFolder.startsWith(t.getSourcePath())){this.projectName=e;break}if(!this.projectName)for(const[e,t]of this.workspaceFolder.getAngularProjects())if(""!==t.getRootPath()&&this.contextPath.relativeToWorkspaceFolder.startsWith(t.getRootPath())){this.projectName=e;break}this.projectName?(s.Output.logInfo(`Source-relative context path detected: ${this.contextPath.relativeToProjectFolder}`),s.Output.logInfo(`Angular project detected from context path: "${this.projectName}"`)):s.Output.logInfo("No Angular project detected from context path.")}else s.Output.logInfo("No context path detected.")}}},457:(e,t)=>{function o(e){return e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.formatCliCommandOptions=t.dasherize=void 0,t.dasherize=o,t.formatCliCommandOptions=function(e){return Array.from(e).map((([e,t])=>{const n=o(e);return"true"===t?`--${n}`:Array.isArray(t)?t.map((e=>`--${n} ${e}`)).join(" "):`--${n} ${t}`})).join(" ")}},150:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dasherize=t.formatCliCommandOptions=t.UserJourney=void 0;var n=o(12);Object.defineProperty(t,"UserJourney",{enumerable:!0,get:function(){return n.UserJourney}});var i=o(457);Object.defineProperty(t,"formatCliCommandOptions",{enumerable:!0,get:function(){return i.formatCliCommandOptions}}),Object.defineProperty(t,"dasherize",{enumerable:!0,get:function(){return i.dasherize}})},12:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserJourney=void 0;const i=o(549),r=o(622),a=o(63),s=o(928),c=o(86),l=o(585),u=o(859),h=o(457);class d{constructor(){this.projectName=""}start(e,t,o){return n(this,void 0,void 0,(function*(){try{yield i.window.withProgress({location:i.ProgressLocation.Window,title:`${a.extensionName}: loading configuration, please wait...`},(()=>c.Workspace.whenStable()))}catch(e){return void s.Output.showError(`Loading configurations needed for ${a.extensionName} extension was too long. Check Output channel for error logs.`)}let n;try{n=yield c.Workspace.askFolder(e)}catch(e){return void s.Output.showError('No valid Angular config file found for the chosen workspace. Add a "angular.json" file in your project with `{ "version": 1 }`')}if(!n)return void s.Output.logInfo("You have canceled the workspace folder choice.");if(this.workspaceFolder=n,s.Output.logInfo(`Workspace folder selected: "${n.name}"`),this.cliCommand=new u.CliCommand(n,null==e?void 0:e.fsPath),!this.cliCommand.getProjectName()&&this.workspaceFolder.getAngularProjects().size>0){const e=yield this.askProjectName();if(!e)return void s.Output.logInfo("You have canceled the Angular project choice.");this.cliCommand.setProjectName(e)}if(this.projectName=this.cliCommand.getProjectName(),this.projectName&&s.Output.logInfo(`Angular project used: "${this.cliCommand.getProjectName()}"`),!t){try{t=yield this.askCollectionName()}catch(e){return void this.showCollectionMissingErrorWithFix(a.angularCollectionName).catch((()=>{}))}if(!t)return void s.Output.logInfo("You have canceled the collection choice.")}s.Output.logInfo(`Collection used: "${t}"`),this.cliCommand.setCollectionName(t);const r=this.workspaceFolder.collections.getCollection(t);if(!r)return void this.showCollectionMissingErrorWithFix(t).catch((()=>{}));if(this.collection=r,!o&&!(o=yield this.askSchematicName()))return void s.Output.logInfo("You have canceled the schematic choice.");s.Output.logInfo(`Schematic used: "${t}:${o}"`);const l=this.collection.getSchematic(o);if(!l)return void s.Output.showError(`Cannot load "${t}:${o}" schematic. See Output channel for error logs.`);if(this.schematic=l,this.cliCommand.setSchematic(l),!(yield this.cliCommand.validateProject())){const e=yield this.askSourcePath();if(!e)return void s.Output.logInfo("You have canceled the source path choice.");this.cliCommand.addOptions([["path",e]])}let h;if(this.schematic.hasNameAsFirstArg()){if(s.Output.logInfo("This schematic has a default argument to set the path and name."),h=yield this.askNameAsFirstArg(),!h)return void s.Output.logInfo("You have canceled the default argument input.");this.cliCommand.setNameAsFirstArg(h)}let f=!1;if(t===a.angularCollectionName&&d.shortcutSchematics.includes(o)){let e;if("component"===o){if(e=yield this.askComponentOptions(),!e)return void s.Output.logInfo("You have canceled the component type choice.")}else if("module"===o){if(e=yield this.askModuleOptions(),!e)return void s.Output.logInfo("You have canceled the module type choice.");if(!e.has("module")){const e=yield this.askWhereToImportModule();e&&this.cliCommand.addOptions([["module",e]])}}if(e&&this.cliCommand.addOptions(e),f=yield this.askShortcutConfirmation(),void 0===f)return void s.Output.logInfo("You have canceled the generation.")}if(!f){const e=yield this.askOptions();if(this.cliCommand.addOptions(e),!(yield this.askConfirmation()))return void s.Output.logInfo("You have canceled the generation.")}this.cliCommand.launchCommand();try{yield i.window.withProgress({location:i.ProgressLocation.Notification,title:`${a.extensionName}: launching the generation, please wait...`},(()=>this.jumpToFile(this.cliCommand.guessGereratedFileFsPath())))}catch(e){this.showUnknownStatus().catch((()=>{}))}}))}askProjectName(){return n(this,void 0,void 0,(function*(){if(1===this.workspaceFolder.getAngularProjects().size)return Array.from(this.workspaceFolder.getAngularProjects().keys())[0];{const e=Array.from(this.workspaceFolder.getAngularProjects()).map((([e,t])=>{const o=`${this.workspaceFolder.isRootAngularProject(e)?"root ":""}${t.getType()} in ${t.getAppOrLibPath()}`;return{label:e,description:`${o.charAt(0).toUpperCase()}${o.substr(1)}`}})),t=yield i.window.showQuickPick(e,{placeHolder:"In which your Angular projects do you want to generate?",ignoreFocusOut:!0});return null==t?void 0:t.label}}))}askCollectionName(){return n(this,void 0,void 0,(function*(){if(0===this.workspaceFolder.collections.getCollectionsNames().length)throw new Error;if(1===this.workspaceFolder.collections.getCollectionsNames().length){const e=this.workspaceFolder.collections.getCollectionsNames()[0];return s.Output.logInfo(`Only collection detected: "${e}". Default to it.`),e}return s.Output.logInfo("Multiple collections detected: ask the user which one to use."),i.window.showQuickPick(this.workspaceFolder.collections.getCollectionsNames(),{placeHolder:"What schematics collection do you want to use?",ignoreFocusOut:!0})}))}askSchematicName(){return n(this,void 0,void 0,(function*(){const e=yield i.window.showQuickPick(this.collection.schematicsChoices,{placeHolder:"What schematics do you want to generate?",ignoreFocusOut:!0});return e?e.label:void 0}))}askSourcePath(){return n(this,void 0,void 0,(function*(){return i.window.showInputBox({prompt:'What is the source path? (Pro-tip: the extension can detect it with a correct "angular.json" or if there is an "app.module.ts" file)',placeHolder:"src/app",ignoreFocusOut:!0})}))}askNameAsFirstArg(){return n(this,void 0,void 0,(function*(){const e=this.cliCommand.getProjectName(),t=this.cliCommand.getContextForNameAsFirstArg();s.Output.logInfo(`Context path detected for default argument: "${t}"`);let o=`Choose the name${this.schematic.hasOption("path")?" or path/to/name":""}.`;this.schematic.hasOption("path")&&this.workspaceFolder.isRootAngularProject(e)&&!t&&(o=`${o} Pro-tip: the path can be inferred if you right-click on the directory where you want to generate.`);const n=yield i.window.showInputBox({prompt:o,value:t,valueSelection:[t.length,t.length],ignoreFocusOut:!0}),r=`.${this.schematic.getName()}`;return(null==n?void 0:n.endsWith(r))?n.replace(r,""):n}))}askComponentOptions(){var e;return n(this,void 0,void 0,(function*(){const t=this.workspaceFolder.getComponentTypes(this.projectName),o=Array.from(t.values()).map((e=>e.choice)),n=yield i.window.showQuickPick(o,{placeHolder:"What type of component do you want?",ignoreFocusOut:!0});return n?null===(e=t.get(n.label))||void 0===e?void 0:e.options:void 0}))}askModuleOptions(){var e;return n(this,void 0,void 0,(function*(){const t=this.workspaceFolder.getModuleTypes(),o=t.get(l.MODULE_TYPE.LAZY);if(o){const e=this.cliCommand.getRouteFromFirstArg();o.options.set("route",e),o.choice.description=h.formatCliCommandOptions(o.options)}const n=Array.from(t.values()).map((e=>e.choice)),r=yield i.window.showQuickPick(n,{placeHolder:"What type of module do you want?",ignoreFocusOut:!0});return r?null===(e=t.get(r.label))||void 0===e?void 0:e.options:void 0}))}askWhereToImportModule(){return n(this,void 0,void 0,(function*(){const e="Nowhere",t=this.cliCommand.getProjectSourcePath(),o=new i.RelativePattern(t,"**/*.module.ts"),n=(yield i.window.withProgress({location:i.ProgressLocation.Notification,title:`${a.extensionName}: looking for existing modules, please wait...`},(()=>i.workspace.findFiles(o,void 0,50)))).filter((e=>!e.path.includes("-routing"))).map((e=>r.posix.relative(t,e.path))).map((e=>e.substr(0,e.length-10)));if(0===n.length)return;n.unshift(e);const s=yield i.window.showQuickPick(n,{placeHolder:"Where do you want to import the module?",ignoreFocusOut:!0});return s!==e?s:void 0}))}askShortcutConfirmation(){return n(this,void 0,void 0,(function*(){const e=yield i.window.showQuickPick(l.shortcutsConfirmationChoices,{placeHolder:this.cliCommand.getCommand(),ignoreFocusOut:!0});return(null==e?void 0:e.label)===l.SHORTCUTS_CONFIRMATION_LABEL.YES||(null==e?void 0:e.label)!==l.SHORTCUTS_CONFIRMATION_LABEL.MORE_OPTIONS&&void 0}))}askOptions(){return n(this,void 0,void 0,(function*(){const e=yield this.askOptionsNames();return e?yield this.askOptionsValues(e):new Map}))}askOptionsNames(){var e;return n(this,void 0,void 0,(function*(){const t=this.schematic.optionsChoices;return 0===t.length?[]:(null!==(e=yield i.window.showQuickPick(t,{canPickMany:!0,placeHolder:"Do you need some options? (if not, just press Enter to skip this step)",ignoreFocusOut:!0}))&&void 0!==e?e:[]).map((e=>e.label))}))}askOptionsValues(e){var t,o,i;return n(this,void 0,void 0,(function*(){const n=[...this.schematic.getRequiredOptions(),...this.schematic.getSomeOptions(e)],r=new Map;for(const[e,a]of n){let n="";const s=null!==(o=null!==(t=null==a?void 0:a["x-prompt"])&&void 0!==t?t:a.description)&&void 0!==o?o:"What value do you want for this option?";if(void 0!==a.enum)n=yield this.askOptionEnum(e,a.enum,s);else if("boolean"===a.type){const t=!1===a.default?["false","true"]:["true","false"];n=yield this.askOptionEnum(e,t,s)}else n="array"===a.type&&(null===(i=a.items)||void 0===i?void 0:i.enum)?yield this.askOptionMultiselect(e,a.items.enum,s):yield this.askOptionText(e,s);n&&r.set(e,n)}return r}))}askOptionText(e,t){return n(this,void 0,void 0,(function*(){return i.window.showInputBox({prompt:`--${h.dasherize(e)}: ${t}`,ignoreFocusOut:!0})}))}askOptionEnum(e,t,o){return n(this,void 0,void 0,(function*(){return i.window.showQuickPick(t,{placeHolder:`--${h.dasherize(e)}: ${o}`,ignoreFocusOut:!0})}))}askOptionMultiselect(e,t,o){return n(this,void 0,void 0,(function*(){return i.window.showQuickPick(t,{placeHolder:`--${h.dasherize(e)}: ${o}`,canPickMany:!0,ignoreFocusOut:!0})}))}askConfirmation(){return n(this,void 0,void 0,(function*(){const e="$(check) Confirm",t="$(debug-alt) Test",o=[{label:e,description:"Pro-tip: take a minute to check the command above is really what you want"},{label:t,description:"Simulate the command with --dry-run"},{label:"$(close) Cancel"}],n=yield i.window.showQuickPick(o,{placeHolder:this.cliCommand.getCommand(),ignoreFocusOut:!0});return(null==n?void 0:n.label)===t?(this.cliCommand.launchCommand({dryRun:!0}),this.askConfirmation()):(null==n?void 0:n.label)===e}))}jumpToFile(e,t=0){return n(this,void 0,void 0,(function*(){if(""===e)throw new Error;if(yield s.FileSystem.isReadable(e,{silent:!0})){const t=yield i.workspace.openTextDocument(e);return yield i.window.showTextDocument(t),s.Terminals.back(this.workspaceFolder),void s.Output.logInfo("Command has succeeded! Check the Terminal for more details.")}if(!(t<10))throw new Error;t+=1,yield new Promise(((o,n)=>{setTimeout((()=>{this.jumpToFile(e,t).then((()=>{o()})).catch((()=>{n()}))}),500)}))}))}showUnknownStatus(){return n(this,void 0,void 0,(function*(){s.Output.logInfo("Command launched."),"Refresh Explorer"===(yield i.window.showInformationMessage("Command launched, check the Terminal to know its status. You may need to refresh the Explorer to see the generated file(s).","Refresh Explorer"))&&i.commands.executeCommand("workbench.files.action.refreshFilesExplorer").then((()=>{}),(()=>{}))}))}showCollectionMissingErrorWithFix(e){return n(this,void 0,void 0,(function*(){const t=e===a.angularCollectionName?`"${e}" should be present in a correctly installed Angular project.`:`Cannot load "${e}" collection. It may not exist in "${this.workspaceFolder.name}" workspace folder.`;s.Output.logError(t);const o="Try to npm install the missing schematics";if((yield i.window.showErrorMessage(t,o))===o){s.Output.logInfo(`Trying to npm install ${e}`),s.Terminals.send(this.workspaceFolder,`npm install ${e} --save-dev`);const t="Reload window";(yield i.window.showInformationMessage("Once the npm install is finished, the project must be reloaded.",t))===t&&i.commands.executeCommand("workbench.action.reloadWindow").then((()=>{}),(()=>{}))}}))}}t.UserJourney=d,d.shortcutSchematics=["component","service","module"]},899:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=void 0;const i=o(747),r=o(622),a=o(516),s=o(344);class c{static findPackageFsPath(e,t,o,{silent:i=!1}={}){var a;return n(this,void 0,void 0,(function*(){const n=r.join(t,this.defaultNodeModulesPath,o,"package.json");if(void 0===this.packagesCache.get(`${e.name}:${o}`))if(yield this.isReadable(n,{silent:!0}))this.packagesCache.set(`${e.name}:${o}`,n);else{const n=r.join(t,"..");if(t!==n)return yield this.findPackageFsPath(e,n,o,{silent:i});this.packagesCache.set(`${e.name}:${o}`,null),i||s.Output.logError(`"${o}" package not found in any "node_modules" folder.`)}return null!==(a=this.packagesCache.get(`${e.name}:${o}`))&&void 0!==a?a:void 0}))}static isReadable(e,{silent:t=!1}={}){var o;return n(this,void 0,void 0,(function*(){if(this.readableFiles.has(e))return!0;try{yield i.promises.access(e,i.constants.F_OK|i.constants.R_OK)}catch(n){return t||this.logError(e,"object"==typeof n&&"ENOENT"===(null===(o=n)||void 0===o?void 0:o.code)?"found":"read"),!1}return this.readableFiles.add(e),!0}))}static parseJsonFile(e,{silent:t=!1}={}){return n(this,void 0,void 0,(function*(){if(yield this.isReadable(e,{silent:t})){let o;try{const t=yield i.promises.readFile(e,{encoding:"utf8"});o=a.parse(t)}catch(o){return void(t||this.logError(e,"parsed"))}return o}}))}static removeFilename(e){return r.posix.basename(e).includes(".")?r.posix.dirname(e):e}static convertRelativePathToRelativeFsPath(e){return r.sep!==r.posix.sep?e.split(r.posix.sep).join(r.sep):e}static convertRelativeFsPathToRelativePath(e){return r.sep!==r.posix.sep?e.split(r.sep).join(r.posix.sep):e}static logError(e,t){const o=`"${e}" can not be ${t}.`;s.Output.logError(o)}}t.FileSystem=c,c.defaultNodeModulesPath="node_modules",c.packagesCache=new Map,c.readableFiles=new Set},928:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JsonValidator=t.Terminals=t.Output=t.FileSystem=void 0;var n=o(899);Object.defineProperty(t,"FileSystem",{enumerable:!0,get:function(){return n.FileSystem}});var i=o(344);Object.defineProperty(t,"Output",{enumerable:!0,get:function(){return i.Output}});var r=o(417);Object.defineProperty(t,"Terminals",{enumerable:!0,get:function(){return r.Terminals}});var a=o(683);Object.defineProperty(t,"JsonValidator",{enumerable:!0,get:function(){return a.JsonValidator}})},683:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JsonValidator=void 0,t.JsonValidator=class{static boolean(e){if("boolean"==typeof e)return e}static number(e){if("number"==typeof e)return e}static string(e){if("string"==typeof e)return e}static array(e,t){if(Array.isArray(e)&&(!t||e.length===e.filter((e=>typeof e===t)).length))return e}static object(e){if("object"==typeof e&&null!==e)return e}}},344:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Output=void 0;const n=o(549),i=o(63);t.Output=class{static get channel(){return this._channel||(this._channel=n.window.createOutputChannel(i.extensionName)),this._channel}static logInfo(e){this.channel.appendLine(`[Info - ${(new Date).toLocaleTimeString()}] ${e}`)}static logWarning(e){this.channel.appendLine(`[Warning - ${(new Date).toLocaleTimeString()}] ${e}`)}static logError(e){this.channel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`)}static showError(e){this.logError(e),n.window.showErrorMessage(e).then((()=>{}),(()=>{}))}static dispose(){this.channel.dispose()}}},417:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminals=void 0;const n=o(549),i=o(63);class r{static init(){this.closeEvent=n.window.onDidCloseTerminal((e=>{if(e.name.startsWith(i.extensionName)){const t=e.name.substr(e.name.indexOf("-")+2);this.terminals.delete(t)}}))}static send(e,t){this.previousTerminal=n.window.activeTerminal;const o=this.getTerminal(e);o.show(!0),o.sendText(t)}static back(e){this.previousTerminal&&n.window.terminals.length>this.terminals.size?this.previousTerminal.show(!0):this.getTerminal(e).hide()}static disposeAll(){var e;null===(e=this.closeEvent)||void 0===e||e.dispose();for(const e of this.terminals.values())e.dispose()}static getTerminal(e){const t=`${i.extensionName} - ${e.name}`;return this.terminals.has(e.name)&&this.isTerminalExisting(t)||this.terminals.set(e.name,n.window.createTerminal({name:t,cwd:e.uri.fsPath})),this.terminals.get(e.name)}static isTerminalExisting(e){return n.window.terminals.map((e=>e.name)).includes(e)}}t.Terminals=r,r.terminals=new Map},132:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SchematicsTreeDataProvider=void 0;var n=o(410);Object.defineProperty(t,"SchematicsTreeDataProvider",{enumerable:!0,get:function(){return n.SchematicsTreeDataProvider}})},410:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SchematicsTreeDataProvider=void 0;const n=o(549),i=o(622),r=o(86);t.SchematicsTreeDataProvider=class{constructor(){this.iconPath="",this.collections=new Map;const e=n.extensions.getExtension("cyrilletuzi.angular-schematics");this.iconPath=i.join(e.extensionPath,"angular.svg")}getTreeItem(e){return e}getChildren(e){var t;if(e){const o=this.collections.get(e.label);return null!==(t=null==o?void 0:o.getSchematicsNames().map((e=>{const t=new n.TreeItem(e,n.TreeItemCollapsibleState.None);return t.command={title:`Generate ${e}`,command:"ngschematics.generate",arguments:[void 0,{collectionName:o.getName(),schematicName:e}]},t.iconPath=this.iconPath,t})))&&void 0!==t?t:[]}for(const[,e]of r.Workspace.folders)for(const[t,o]of e.collections.list)this.collections.has(t)||this.collections.set(t,o);return Array.from(this.collections.keys()).map((e=>new n.TreeItem(e,n.TreeItemCollapsibleState.Expanded)))}}},380:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AngularProject=void 0;const i=o(622),r=o(928),a=o(585),s=o(774);t.AngularProject=class{constructor(e,t){this.name=e,this.schematicsDefaults=t.schematics,this.type=t.projectType,this.rootPath=t.root,void 0!==t.sourceRoot?this.sourcePath=t.sourceRoot:(this.sourcePath=i.posix.join(this.rootPath,"src"),r.Output.logWarning(`Your Angular configuration file should contain a "sourceRoot" string property for your "${this.name}" project. Default to "${this.sourcePath}".`));const o="library"===t.projectType?"lib":"app";this.appOrLibPath=i.posix.join(this.sourcePath,o),r.Output.logInfo(`"${e}" Angular project is of type "${this.type}" and its path is: ${this.appOrLibPath}.`),this.sourcePath.startsWith(this.rootPath)||r.Output.logError(`"root" and "sourceRoot" of "${this.name}" project do not start by the same path in angular.json`)}init(e){return n(this,void 0,void 0,(function*(){r.Output.logInfo(`Loading "${this.name}" Angular project's lint configuration.`);const t=r.FileSystem.convertRelativePathToRelativeFsPath(this.rootPath),o=i.join(e.uri.fsPath,t),n=new s.LintConfig,c=yield n.init(o,{silent:!0});this.lintConfig=n;const l=new a.ComponentShortcut;return yield l.init(e),this.componentShortcut=l,c}))}getRootPath(){return this.rootPath}getSourcePath(){return this.sourcePath}getAppOrLibPath(){return this.appOrLibPath}getComponentSuffixes(){return this.lintConfig.componentSuffixes}getType(){return this.type}hasComponentSuffix(e){return this.lintConfig.hasComponentSuffix(e)}getSchematicsOptionDefaultValue(e,t){var o,n;return null===(n=null===(o=this.schematicsDefaults)||void 0===o?void 0:o.get(e))||void 0===n?void 0:n[t]}}},256:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AngularConfig=void 0;const i=o(549),r=o(63),a=o(928),s=o(380);t.AngularConfig=class{constructor(){this.schematicsDefaults=new Map,this.projects=new Map,this.defaultUserCollection=r.angularCollectionName,this.defaultCollections=[],this.rootProjectName=""}init(e,t){return n(this,void 0,void 0,(function*(){const o=yield a.FileSystem.parseJsonFile(t),n=this.validateConfig(o);this.initDefaultCollections(n),a.Output.logInfo(`Default schematics collection detected in your Angular config: ${this.defaultUserCollection}`),this.initSchematicsDefaults(n),a.Output.logInfo(`${n.projects.size} Angular project(s) detected.`);const r=yield this.setProjects(e,n);return r.push(i.workspace.createFileSystemWatcher(t)),r}))}getSchematicsOptionDefaultValue(e,t){var o,n;return null===(n=null===(o=null==this?void 0:this.schematicsDefaults)||void 0===o?void 0:o.get(e))||void 0===n?void 0:n[t]}validateConfig(e){var t,o,n;const i=null!==(t=a.JsonValidator.object(e))&&void 0!==t?t:{},r=a.JsonValidator.number(i.version);if(!r)throw a.Output.logError('Your Angular config file must contain `"version" : 1`, please correct it.'),new Error;const s=["application","library"],c=new Map(Object.entries(null!==(o=a.JsonValidator.object(i.projects))&&void 0!==o?o:{}).filter((([e])=>!e.endsWith("-e2e"))).map((([e,t])=>{var o,n;const i=null!==(o=a.JsonValidator.object(t))&&void 0!==o?o:{},r=null!==(n=a.JsonValidator.string(i.projectType))&&void 0!==n?n:"";let c="application";s.includes(r)?c=r:a.Output.logWarning(`Your Angular configuration file should contain a "projectType" property with "application" or "library" for your "${e}" project. Default to "application".`);let l=a.JsonValidator.string(i.root);return void 0===l&&(l="",a.Output.logWarning(`Your Angular configuration file should contain a "root" string property for your "${e}" project. Default to "".`)),[e,{projectType:c,root:l,sourceRoot:a.JsonValidator.string(i.sourceRoot),schematics:this.validateConfigSchematics(i.schematics)}]})));return 0===c.size&&a.Output.logWarning('No "projects" detected in your Angular config file. You should correct that.'),{version:r,cli:{defaultCollection:a.JsonValidator.string(null===(n=a.JsonValidator.object(i.cli))||void 0===n?void 0:n.defaultCollection)},schematics:this.validateConfigSchematics(i.schematics),projects:c}}validateConfigSchematics(e){var t;return new Map(Object.entries(null!==(t=a.JsonValidator.object(e))&&void 0!==t?t:{}).map((([e,t])=>{var o;return[e,{flat:a.JsonValidator.boolean(null===(o=a.JsonValidator.object(t))||void 0===o?void 0:o.flat)}]})))}initDefaultCollections(e){var t,o;this.defaultUserCollection=null!==(o=null===(t=e.cli)||void 0===t?void 0:t.defaultCollection)&&void 0!==o?o:r.angularCollectionName,this.defaultCollections=Array.from(new Set([this.defaultUserCollection,r.angularCollectionName]))}initSchematicsDefaults(e){this.schematicsDefaults=e.schematics}setProjects(e,t){return n(this,void 0,void 0,(function*(){this.rootProjectName="",this.projects.clear();const o=[];for(const[n,i]of t.projects){const t=new s.AngularProject(n,i),r=yield t.init(e);r&&o.push(r),this.projects.set(n,t),this.rootProjectName||""!==i.root||(this.rootProjectName=n,a.Output.logInfo(`"${n}" project is the root Angular project.`))}return o}))}}},281:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LintConfig=t.AngularProject=t.AngularConfig=void 0;var n=o(256);Object.defineProperty(t,"AngularConfig",{enumerable:!0,get:function(){return n.AngularConfig}});var i=o(380);Object.defineProperty(t,"AngularProject",{enumerable:!0,get:function(){return i.AngularProject}});var r=o(774);Object.defineProperty(t,"LintConfig",{enumerable:!0,get:function(){return r.LintConfig}})},774:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LintConfig=void 0;const i=o(549),r=o(622),a=o(928);t.LintConfig=class{constructor(){this.componentSuffixes=[]}init(e,{silent:t=!1}={}){return n(this,void 0,void 0,(function*(){const o=r.join(e,"tslint.json"),n=r.join(e,".eslintrc.json");let s={rules:{}};if(yield a.FileSystem.isReadable(n,{silent:!0})){const e=yield a.FileSystem.parseJsonFile(n,{silent:t});this.linter="eslint",s=this.validateEslintConfig(e)}else if(yield a.FileSystem.isReadable(o,{silent:!0})){const e=yield a.FileSystem.parseJsonFile(o,{silent:t});this.linter="tslint",s=this.validateTslintConfig(e)}return this.initComponentSuffixes(s),this.linter?(a.Output.logInfo(`${this.componentSuffixes.length} custom component suffixe(s) detected in ${this.linter} config${this.componentSuffixes.length>0?`: ${this.componentSuffixes.join(", ")}`:""}`),i.workspace.createFileSystemWatcher("eslint"===this.linter?n:o)):void a.Output.logWarning("No linter configuration found.")}))}hasComponentSuffix(e){return this.componentSuffixes.includes(e.toLowerCase())}validateEslintConfig(e){var t,o,n,i,r,s,c,l,u,h;const d=null!==(o=a.JsonValidator.array(null===(t=a.JsonValidator.object(e))||void 0===t?void 0:t.overrides))&&void 0!==o?o:[];for(const e of d){const t=null!==(s=null!==(i=a.JsonValidator.string(null===(n=a.JsonValidator.object(e))||void 0===n?void 0:n.files))&&void 0!==i?i:a.JsonValidator.array(null===(r=a.JsonValidator.object(e))||void 0===r?void 0:r.files,"string"))&&void 0!==s?s:[];if("string"==typeof t&&"*.ts"===t||Array.isArray(t)&&t.includes("*.ts")){const t=null!==(c=a.JsonValidator.object(a.JsonValidator.object(e).rules))&&void 0!==c?c:{},o=null!==(l=a.JsonValidator.array(null==t?void 0:t["@angular-eslint/component-class-suffix"]))&&void 0!==l?l:[];return{rules:{componentClassSuffixes:null!==(h=a.JsonValidator.array(null===(u=a.JsonValidator.object(o[1]))||void 0===u?void 0:u.suffixes,"string"))&&void 0!==h?h:[]}}}}return{rules:{}}}validateTslintConfig(e){var t,o;const n=null!==(o=a.JsonValidator.object(null===(t=a.JsonValidator.object(e))||void 0===t?void 0:t.rules))&&void 0!==o?o:{},i=a.JsonValidator.array(null==n?void 0:n["component-class-suffix"]);return{rules:{componentClassSuffixes:a.JsonValidator.array(null==i?void 0:i.slice(1),"string")}}}initComponentSuffixes(e){var t,o;this.componentSuffixes=Array.from(new Set(null!==(o=null===(t=null==e?void 0:e.rules)||void 0===t?void 0:t.componentClassSuffixes)&&void 0!==o?o:[])).map((e=>e.toLowerCase()))}}},86:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFolderConfig=t.Workspace=void 0;var n=o(756);Object.defineProperty(t,"Workspace",{enumerable:!0,get:function(){return n.Workspace}});var i=o(28);Object.defineProperty(t,"WorkspaceFolderConfig",{enumerable:!0,get:function(){return i.WorkspaceFolderConfig}})},637:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Collection=void 0;const i=o(549),r=o(622),a=o(928),s=o(241),c=o(724);t.Collection=class{constructor(e){this.schematicsChoices=[],this.schematics=new Map,this.name=e}init(e,t){return n(this,void 0,void 0,(function*(){const o=this.validateConfig(yield a.FileSystem.parseJsonFile(t));return yield this.setSchematics(e,o,t),t.includes("node_modules")?void 0:i.workspace.createFileSystemWatcher(t)}))}getName(){return this.name}getSchematicsNames(){return Array.from(this.schematics.keys()).sort()}getSchematic(e){return this.schematics.get(e)}getFullSchematicName(e){return`${this.name}:${e}`}validateConfig(e){var t,o;const n=new Map(Object.entries(null!==(o=a.JsonValidator.object(null===(t=a.JsonValidator.object(e))||void 0===t?void 0:t.schematics))&&void 0!==o?o:{}).map((([e,t])=>{const o=a.JsonValidator.object(t);return[e,{schema:a.JsonValidator.string(null==o?void 0:o.schema),description:a.JsonValidator.string(null==o?void 0:o.description),hidden:a.JsonValidator.boolean(null==o?void 0:o.hidden),private:a.JsonValidator.boolean(null==o?void 0:o.private),extends:a.JsonValidator.string(null==o?void 0:o.extends)}]})).filter((([e,t])=>!(!t.schema&&!(null==t?void 0:t.extends)&&(a.Output.logWarning(`"${this.name}:${e}" schematic does not have a "schema" string property, so it is dropped.`),1)))));if(0===n.size)throw new Error(`No schematic found for "${this.name}" collection, so it is dropped.`);return{schematics:n}}setSchematics(e,t,o){return n(this,void 0,void 0,(function*(){this.schematics.clear(),this.schematicsChoices=[];const n=Array.from(t.schematics);a.Output.logInfo(`${n.length} schematic(s) detected for "${this.name}" collection: ${n.map((([e])=>e)).join(", ")}`);const i=n.filter((([,e])=>!e.hidden&&!e.private)).filter((([e])=>"ng-add"!==e));if(0===i.length)throw new Error(`No public generation schematic found for "${this.name}" collection, so it is dropped.`);a.Output.logInfo(`${i.length} filtered schematic(s) keeped for "${this.name}" collection: ${i.map((([e])=>e)).join(", ")}`);for(const[t,n]of i){const i=this.getFullSchematicName(t);let l;if(a.Output.logInfo(`Loading "${i}" schematic`),n.extends){const[o]=n.extends.split(":");if(o){const i=yield c.findCollectionFsPath(e,o);i?l={name:t,collectionName:this.name,description:`Schematic herited from "${o}"`,collectionFsPath:i}:a.Output.logWarning(`"${this.name}" collection wants to inherit "${t}" schematic from "${n.extends}" collection, but the latest cannot be found.`)}else a.Output.logWarning(`"${this.name}" collection's name is invalid.`)}else if(n.schema){const e=r.join(r.dirname(o),n.schema);l={name:t,collectionName:this.name,description:n.description,fsPath:e}}if(l){const e=new s.Schematic(l.name,l.collectionName);try{yield e.init({fsPath:l.fsPath,collectionFsPath:l.collectionFsPath}),this.schematics.set(t,e),this.setSchematicChoice(l)}catch(e){a.Output.logError(`"${i}" schematic loading failed.`)}}}this.schematicsChoices=this.schematicsChoices.sort(((e,t)=>e.label.localeCompare(t.label)))}))}setSchematicChoice(e){this.schematicsChoices.push({label:e.name,description:e.description})}}},398:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Collections=void 0;const i=o(549),r=o(63),a=o(928),s=o(637),c=o(724);t.Collections=class{constructor(){this.list=new Map}init(e,t){return n(this,void 0,void 0,(function*(){return yield this.setList(e,t)}))}getCollectionsNames(){return Array.from(this.list.keys())}getCollection(e){return this.list.get(e)}setList(e,t){var o;return n(this,void 0,void 0,(function*(){a.Output.logInfo("Loading the list of schematics collections."),this.list.clear();const n=[],l=i.workspace.getConfiguration("ngschematics",e.uri).get("schematics",[]),u=null!==(o=a.JsonValidator.array(l,"string"))&&void 0!==o?o:[];a.Output.logInfo(`${u.length} user schematics collection(s) detected in Code preferences${u.length>0?`: ${u.join(", ")}`:""}`);const h=Array.from(new Set([...t,...r.defaultCollectionsNames,...u])),d=[];for(const o of h){const n=!t.includes(o)&&!u.includes(o),i=yield c.findCollectionFsPath(e,o,{silent:n});i&&d.push({name:o,fsPath:i})}d.length>0?a.Output.logInfo(`${d.length} installed collection(s) detected: ${d.map((e=>e.name)).join(", ")}`):a.Output.logError(`No collection found. "${r.angularCollectionName}" should be present in a correctly installed Angular CLI project. If you are in a non-Angular CLI project, try to run in the Terminal: "npm install ${r.angularCollectionName} --save-dev"`);for(const t of d){a.Output.logInfo(`Loading "${t.name}" collection.`);const o=new s.Collection(t.name);try{const i=yield o.init(e,t.fsPath);this.list.set(t.name,o),i&&n.push(i)}catch(e){a.Output.logError(e.message)}}return n}))}}},724:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.findCollectionFsPath=void 0;const i=o(622),r=o(928);t.findCollectionFsPath=function(e,t,{silent:o=!1}={}){var a;return n(this,void 0,void 0,(function*(){if(t.startsWith(".")&&t.endsWith(".json")){const n=i.join(e.uri.fsPath,t);if(!(yield r.FileSystem.isReadable(n,{silent:o})))return;return n}{const n=yield r.FileSystem.findPackageFsPath(e,e.uri.fsPath,t,{silent:o});if(!n)return;const s=yield r.FileSystem.parseJsonFile(n),c=r.JsonValidator.string(null===(a=r.JsonValidator.object(s))||void 0===a?void 0:a.schematics);if(!c)return;const l=i.join(i.dirname(n),c);if(!(yield r.FileSystem.isReadable(l,{silent:o})))return;return l}}))}},981:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Schematic=t.Collection=t.Collections=void 0;var n=o(398);Object.defineProperty(t,"Collections",{enumerable:!0,get:function(){return n.Collections}});var i=o(637);Object.defineProperty(t,"Collection",{enumerable:!0,get:function(){return i.Collection}});var r=o(241);Object.defineProperty(t,"Schematic",{enumerable:!0,get:function(){return r.Schematic}})},241:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Schematic=void 0;const i=o(622),r=o(928);t.Schematic=class{constructor(e,t){this.optionsChoices=[],this.options=new Map,this.requiredOptionsNames=[],this.name=e,this.collectionName=t}init({fsPath:e,collectionFsPath:t}){return n(this,void 0,void 0,(function*(){if(!e){if(!t)throw new Error(`"${this.collectionName}:${this.name}" schematic cannot be extended.`);try{e=yield this.getFsPathFromCollection(t)}catch(e){throw new Error(`"${this.collectionName}:${this.name}" can not be extended.`)}}const o=yield r.FileSystem.parseJsonFile(e);if(!o)throw new Error(`"${this.collectionName}:${this.name}" schematic cannot be loaded.`);const n=this.validateConfig(o);this.options=n.properties,r.Output.logInfo(`${this.options.size} options detected for "${this.name}" schematic: ${Array.from(this.options.keys()).join(", ")}`),this.initGlobalOptions(),this.requiredOptionsNames=this.initRequiredOptions(n),r.Output.logInfo(`${this.requiredOptionsNames.length} required option(s) detected for "${this.name}" schematic${this.requiredOptionsNames.length>0?`: ${this.requiredOptionsNames.join(", ")}`:""}`),this.optionsChoices=this.initOptionsChoices(n,this.requiredOptionsNames)}))}getName(){return this.name}getSomeOptions(e){return new Map(e.filter((e=>this.options.has(e))).map((e=>[e,this.options.get(e)])))}getRequiredOptions(){return new Map(this.requiredOptionsNames.map((e=>[e,this.options.get(e)])))}getOptionDefaultValue(e){var t;return null===(t=this.options.get(e))||void 0===t?void 0:t.default}hasOption(e){return this.options.has(e)}hasNameAsFirstArg(){var e,t;for(const[o,n]of this.options)if("name"===o&&"argv"===(null===(e=n.$default)||void 0===e?void 0:e.$source)&&0===(null===(t=n.$default)||void 0===t?void 0:t.index))return!0;return!1}getFsPathFromCollection(e){var t,o,a;return n(this,void 0,void 0,(function*(){const n=yield r.FileSystem.parseJsonFile(e),s=r.JsonValidator.string(null===(a=r.JsonValidator.object(null===(o=r.JsonValidator.object(null===(t=r.JsonValidator.object(n))||void 0===t?void 0:t.schematics))||void 0===o?void 0:o[this.name]))||void 0===a?void 0:a.schema);if(!s)throw new Error;return i.join(i.dirname(e),s)}))}validateConfig(e){var t;const o=r.JsonValidator.object(e);return{properties:new Map(Object.entries(null!==(t=r.JsonValidator.object(null==o?void 0:o.properties))&&void 0!==t?t:{}).map((([e,t])=>{const o=r.JsonValidator.object(t),n=r.JsonValidator.object(null==o?void 0:o.$default);n&&(n.$source=r.JsonValidator.string(n.$source),n.index=r.JsonValidator.number(n.index));let i=r.JsonValidator.object(null==o?void 0:o.items);const a=r.JsonValidator.string(null==o?void 0:o["x-prompt"]),s=r.JsonValidator.object(null==o?void 0:o["x-prompt"]);return i?i.enum=this.validateConfigArrayChoices(r.JsonValidator.array(i.enum)):s&&!0===r.JsonValidator.boolean(s.multiselect)&&(i={},i.enum=this.validateConfigArrayChoices(r.JsonValidator.array(s.items))),[e,{type:r.JsonValidator.string(null==o?void 0:o.type),description:r.JsonValidator.string(null==o?void 0:o.description),visible:r.JsonValidator.boolean(null==o?void 0:o.visible),default:null==o?void 0:o.default,$default:n,enum:this.validateConfigArrayChoices(r.JsonValidator.array(null==o?void 0:o.enum)),items:i,"x-deprecated":r.JsonValidator.string(null==o?void 0:o["x-deprecated"]),"x-prompt":null!=a?a:r.JsonValidator.string(null==s?void 0:s.message)}]}))),required:r.JsonValidator.array(null==o?void 0:o.required,"string")}}validateConfigArrayChoices(e){if(void 0!==e)return e.map((e=>{var t,o;return null!==(o=null!==(t=r.JsonValidator.string(e))&&void 0!==t?t:r.JsonValidator.number(e))&&void 0!==o?o:r.JsonValidator.boolean(e)})).map((e=>(null!=e?e:"").toString())).filter((e=>e))}initGlobalOptions(){this.options.set("force",{type:"boolean",default:!1,description:"Forces overwriting of existing files."})}initRequiredOptions(e){var t;return(null!==(t=e.required)&&void 0!==t?t:[]).filter((t=>{var o;return void 0===(null===(o=e.properties.get(t))||void 0===o?void 0:o.$default)}))}initOptionsChoices(e,t){var o;const n=[],i=Array.from(e.properties).filter((([e])=>"project"!==e)).filter((([,e])=>!1!==e.visible)).filter((([,e])=>void 0===e["x-deprecated"])).filter((([,e])=>!(e.$default&&"argv"===e.$default.$source&&0===e.$default.index)));for(const[e,r]of i){let i=!1,a="";void 0===r.$default&&(t.includes(e)?(i=!0,a="(required) "):void 0!==r["x-prompt"]&&(i=!0,a="(suggested) ")),n.push({label:e,description:`${a}${null!==(o=r.description)&&void 0!==o?o:""}`,picked:i})}return[...n.filter((e=>e.picked)).sort(((e,t)=>e.label.localeCompare(t.label))),...n.filter((e=>!e.picked)).sort(((e,t)=>e.label.localeCompare(t.label)))]}}},785:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentShortcut=t.COMPONENT_TYPE=void 0;const i=o(549),r=o(63),a=o(928),s=o(150);var c;!function(e){e.DEFAULT="$(thumbsdown) Default component",e.PAGE="$(preview) Page",e.PURE="$(zap) Pure component",e.EXPORTED="$(link-external) Exported component"}(c=t.COMPONENT_TYPE||(t.COMPONENT_TYPE={})),t.ComponentShortcut=class{constructor(){this.types=new Map}init(e){return n(this,void 0,void 0,(function*(){this.types.clear(),this.types.set(c.DEFAULT,{choice:{label:c.DEFAULT,detail:"Component with no special behavior (pro-tip: learn about component types in our documentation)"},options:new Map}),this.types.set(c.PAGE,{choice:{label:c.PAGE,detail:"Component associated to a route"},options:new Map([["type","page"],["skipSelector","true"]])}),this.types.set(c.PURE,{choice:{label:c.PURE,detail:"UI / presentation component, used only in its own feature module"},options:new Map([["changeDetection","OnPush"]])}),this.types.set(c.EXPORTED,{choice:{label:c.EXPORTED,detail:"UI / presentation component, declared in a shared UI module and used in multiple feature modules"},options:new Map([["export","true"],["changeDetection","OnPush"]])});for(const t of yield this.getCustomComponentTypes(e))this.types.set(t.label,{choice:{label:t.label,detail:t.detail},options:new Map(t.options)});for(const[,e]of this.types)e.choice.description=s.formatCliCommandOptions(e.options)||"No pre-filled option"}))}getCustomComponentTypes(e){return n(this,void 0,void 0,(function*(){const t=new Map;for(const o of r.defaultComponentTypes)(yield a.FileSystem.findPackageFsPath(e,e.uri.fsPath,o.package,{silent:!0}))&&t.set(o.label,o);let o=i.workspace.getConfiguration("ngschematics",e.uri).get("componentTypes",[]);if(""===o&&(o=[]),Array.isArray(o)){a.Output.logInfo(`${o.length} custom component type(s) detected in the preferences.`);for(const e of o){const o=this.validateUserComponentType(e);o&&(t.has(o.label)&&a.Output.logWarning(`"${o.label}" component type already exists.`),t.set(o.label,o),a.Output.logInfo(`Adding "${o.label}" custom component type.`))}}else a.Output.logWarning('"ngschematics.componentTypes" option has changed in version >= 4. See the changelog to update it.'),o=[];return Array.from(t.values())}))}validateUserComponentType(e){const t=a.JsonValidator.object(e),o=a.JsonValidator.string(null==t?void 0:t.label),n=a.JsonValidator.array(null==t?void 0:t.options);if(!o||!n)return;const i=[];for(const e of n){const t=a.JsonValidator.array(e);if(!t||2!==t.length)return;const o=a.JsonValidator.string(t[0]),n=a.JsonValidator.string(t[1]);if(!o||void 0===n)return;i.push([o,n])}return{label:o,detail:a.JsonValidator.string(null==t?void 0:t.detail),options:i,package:""}}}},585:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleShortcut=t.MODULE_TYPE=t.ComponentShortcut=t.COMPONENT_TYPE=t.shortcutsConfirmationChoices=t.SHORTCUTS_CONFIRMATION_LABEL=void 0;var n=o(158);Object.defineProperty(t,"SHORTCUTS_CONFIRMATION_LABEL",{enumerable:!0,get:function(){return n.SHORTCUTS_CONFIRMATION_LABEL}}),Object.defineProperty(t,"shortcutsConfirmationChoices",{enumerable:!0,get:function(){return n.shortcutsConfirmationChoices}});var i=o(785);Object.defineProperty(t,"COMPONENT_TYPE",{enumerable:!0,get:function(){return i.COMPONENT_TYPE}}),Object.defineProperty(t,"ComponentShortcut",{enumerable:!0,get:function(){return i.ComponentShortcut}});var r=o(635);Object.defineProperty(t,"MODULE_TYPE",{enumerable:!0,get:function(){return r.MODULE_TYPE}}),Object.defineProperty(t,"ModuleShortcut",{enumerable:!0,get:function(){return r.ModuleShortcut}})},635:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleShortcut=t.MODULE_TYPE=void 0;const n=o(150);var i;!function(e){e.DEFAULT="$(extensions) Module of components",e.LAZY="$(zap) Lazy-loaded module of pages",e.ROUTING="$(files) Classic module of pages"}(i=t.MODULE_TYPE||(t.MODULE_TYPE={})),t.ModuleShortcut=class{constructor(){this.types=new Map}init(e){this.types.clear(),this.types.set(i.DEFAULT,{choice:{label:i.DEFAULT,detail:"Module of UI / presentation components"},options:new Map}),e&&this.types.set(i.LAZY,{choice:{label:i.LAZY,detail:"Module with routing, lazy-loaded"},options:new Map([["module","app"]])}),this.types.set(i.ROUTING,{choice:{label:i.ROUTING,detail:"Module with routing, immediately loaded"},options:new Map([["module","app"],["routing","true"]])});for(const[,e]of this.types)e.choice.description=n.formatCliCommandOptions(e.options)||"No pre-filled option"}}},158:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.shortcutsConfirmationChoices=t.SHORTCUTS_CONFIRMATION_LABEL=void 0,function(e){e.YES="$(check) Confirm",e.MORE_OPTIONS="$(gear) Add more options",e.NO="$(close) Cancel"}(o=t.SHORTCUTS_CONFIRMATION_LABEL||(t.SHORTCUTS_CONFIRMATION_LABEL={})),t.shortcutsConfirmationChoices=[{label:o.YES,description:"Pro-tip: take a minute to check the command above is really what you want"},{label:o.MORE_OPTIONS,description:'Pro-tip: you can set default values to "schematics" options in angular.json'},{label:o.NO}]},28:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFolderConfig=void 0;const i=o(549),r=o(622),a=o(63),s=o(928),c=o(150),l=o(981),u=o(281),h=o(585),d=o(774);t.WorkspaceFolderConfig=class{constructor(e){this.fileWatchers=[],this.uri=e.uri,this.name=e.name,this.index=e.index}init(){var e,t,o;return n(this,void 0,void 0,(function*(){this.disposeWatchers(),s.Output.logInfo("Loading Angular configuration.");const n=yield this.findAngularConfigFsPath({uri:this.uri,name:this.name,index:this.index}),c=[],f=r.dirname(n);f!==this.uri.fsPath&&s.Output.logInfo(`Your Angular project is not at the root of your "${this.name}" workspace folder. Real path: ${f}`),this.uri=i.Uri.file(f);const p=new u.AngularConfig;c.push(...yield p.init({uri:this.uri,name:this.name,index:this.index},n)),this.angularConfig=p,s.Output.logInfo("Loading global lint configuration.");const m=new d.LintConfig,g=yield m.init(this.uri.fsPath);this.lintConfig=m,s.Output.logInfo("Loading schematics configuration.");const v=new l.Collections,y=yield v.init({uri:this.uri,name:this.name,index:this.index},this.getDefaultCollections());this.collections=v;const w=new h.ComponentShortcut;yield w.init({uri:this.uri,name:this.name,index:this.index}),this.componentShortcut=w;const C=null!==(o=null===(t=null===(e=this.collections.getCollection(a.angularCollectionName))||void 0===e?void 0:e.getSchematic("module"))||void 0===t?void 0:t.hasOption("route"))&&void 0!==o&&o;s.Output.logInfo("Lazy-loaded module type: "+(C?"enabled":"disabled"));const O=new h.ModuleShortcut;O.init(C),this.moduleShorcut=O,this.fileWatchers.push(...c,...y),g&&this.fileWatchers.push(g);for(const e of this.fileWatchers)e.onDidChange((()=>{s.Output.logInfo(`Reloading "${this.name}" workspace folder configuration.`),this.init().catch((()=>{}))}));this.preferencesWatcher=i.workspace.onDidChangeConfiguration((()=>{s.Output.logInfo(`Reloading "${this.name}" workspace folder configuration.`),this.init().catch((()=>{}))}))}))}getDefaultUserCollection(){return this.angularConfig.defaultUserCollection}getDefaultCollections(){var e,t;return null!==(t=null===(e=this.angularConfig)||void 0===e?void 0:e.defaultCollections)&&void 0!==t?t:[]}getAngularProject(e){return this.angularConfig.projects.get(e)}getAngularProjects(){return this.angularConfig.projects}getComponentTypes(e){var t,o,n,i,r;const s=null!==(o=null===(t=this.getAngularProject(e))||void 0===t?void 0:t.componentShortcut.types)&&void 0!==o?o:this.componentShortcut.types,l=null!==(r=null===(i=null===(n=this.collections.getCollection(a.angularCollectionName))||void 0===n?void 0:n.getSchematic("component"))||void 0===i?void 0:i.hasOption("type"))&&void 0!==r&&r;for(const[,t]of s)if(t.options.has("type")){const o=t.options.get("type");l&&this.hasComponentSuffix(e,o)||(t.options.delete("type"),t.choice.description=c.formatCliCommandOptions(t.options))}return s}getModuleTypes(){return this.moduleShorcut.types}getSchematicsOptionDefaultValue(e,t,o){var n;const i=null===(n=this.getAngularProject(e))||void 0===n?void 0:n.getSchematicsOptionDefaultValue(t,o);return null!=i?i:this.angularConfig.getSchematicsOptionDefaultValue(t,o)}isRootAngularProject(e){return this.angularConfig.rootProjectName===e}hasComponentSuffix(e,t){var o;const n=this.getAngularProject(e);return n&&(null!==(o=n.getComponentSuffixes().length)&&void 0!==o?o:0)>0?n.hasComponentSuffix(t):this.lintConfig.hasComponentSuffix(t)}disposeWatchers(){var e;for(const e of this.fileWatchers)e.dispose();this.fileWatchers=[],null===(e=this.preferencesWatcher)||void 0===e||e.dispose()}findAngularConfigFsPath(e){return n(this,void 0,void 0,(function*(){const t=new i.RelativePattern(e,`{${a.angularConfigFileNames.join(",")}}`);let o=yield i.workspace.findFiles(t,"**/node_modules/**",1);if(0===o.length){const t=new i.RelativePattern(e,`**/{${a.angularConfigFileNames.join(",")}}`);o=yield i.workspace.findFiles(t,"**/node_modules/**")}if(o.length>0){if(1===o.length)s.Output.logInfo(`Angular config file for "${this.name}" workspace folder found at: ${o[0].fsPath}`);else{const e=`More than one Angular config file found for "${this.name}" workspace folder. If you work with multiple Angular repositories at once, you need to open them as different workspaces in Visual Studio Code.`,t="Open VS Code workspaces documentation";s.Output.logError(e),i.window.showErrorMessage(e,"OK",t).then((e=>{e===t&&i.env.openExternal(i.Uri.parse("https://code.visualstudio.com/docs/editor/multi-root-workspaces")).then((()=>{}),(()=>{}))})).then((()=>{}),(()=>{})),o.sort(((e,t)=>e.path.split("/").length<t.path.split("/").length?-1:1))}return o[0].fsPath}throw new Error}))}}},756:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function s(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Workspace=void 0;const i=o(549),r=o(928),a=o(28);class s{static init(){var e;return n(this,void 0,void 0,(function*(){const t=Date.now(),o=null!==(e=i.workspace.workspaceFolders)&&void 0!==e?e:[];o.length>0?r.Output.logInfo(`${o.length} workspace folder(s) detected.`):r.Output.logError("No workspace folder detected.");for(const e of o)yield this.add(e);this.stable=!0;const n=Date.now()-t;r.Output.logInfo(`Configurations of all workspace folders are now ready. Duration: ${n}ms.`),this.watcher=i.workspace.onDidChangeWorkspaceFolders((e=>{var t;for(const t of e.added)r.Output.logInfo(`Loading configuration of new "${t.name}" workspace folder.`),this.add(t).catch((()=>{}));for(const o of e.removed)r.Output.logInfo(`Unloading configuration of removed "${o.name}" workspace folder.`),null===(t=this.folders.get(o.name))||void 0===t||t.disposeWatchers(),this.folders.delete(o.name)}))}))}static getFolderFromPath(e){const t=i.Uri.file(e);return i.workspace.getWorkspaceFolder(t)}static askFolder(e){var t,o,a;return n(this,void 0,void 0,(function*(){let n;if(e&&(r.Output.logInfo("Context path detected: resolving current workspace folder from it."),n=null===(t=i.workspace.getWorkspaceFolder(e))||void 0===t?void 0:t.name),!n)if(1===(null===(o=i.workspace.workspaceFolders)||void 0===o?void 0:o.length))r.Output.logInfo("There is only one workspace folder opened, default to it."),n=i.workspace.workspaceFolders[0].name;else{r.Output.logInfo("There are multiple Code workspaces opened, ask the user which one we should use.");const e=Array.from(this.folders).map((([e,t])=>({label:e,description:t.uri.fsPath})));if(e.length>0){const t=yield i.window.showQuickPick(e,{placeHolder:"In which of your Angular workspace folders do you want to generate?",ignoreFocusOut:!0});n=null==t?void 0:t.label}else n=null===(a=yield i.window.showWorkspaceFolderPick())||void 0===a?void 0:a.name}if(!n)return;const s=this.folders.get(n);if(!s)throw new Error;return s}))}static whenStable(){return n(this,void 0,void 0,(function*(){if(!this.stable){const e=new Promise((e=>{this.isStable(e)})),t=new Promise(((e,t)=>{setTimeout((()=>{t()}),1e4)}));return Promise.race([e,t])}}))}static isStable(e){this.stable?e():setTimeout((()=>{this.isStable(e)}),1e3)}static add(e){return n(this,void 0,void 0,(function*(){r.Output.logInfo(`Loading configuration of "${e.name}" workspace folder.`);try{const t=new a.WorkspaceFolderConfig(e);yield t.init(),this.folders.set(e.name,t)}catch(t){r.Output.logError(`"${e.name}" was dropped as it does not contain any Angular config file. Add a "angular.json" file in your project with \`{ "version": 1 }\``)}}))}}t.Workspace=s,s.folders=new Map,s.stable=!1},747:e=>{e.exports=require("fs")},622:e=>{e.exports=require("path")},549:e=>{e.exports=require("vscode")}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}return o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(112)})();